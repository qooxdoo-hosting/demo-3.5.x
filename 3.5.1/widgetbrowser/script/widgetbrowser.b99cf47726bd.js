qx.$$packageData['16384']={"locales":{},"resources":{"qx/static/blank.html":"qx","widgetbrowser/blank.html":"widgetbrowser","widgetbrowser/fo_tester.swf":"widgetbrowser"},"translations":{"C":{},"en":{}}};
qx.Part.$$notifyLoad("16384", function() {
(function(){var a="</div>",b="redraw",c="widgetbrowser.pages.Embed",d="browser.documentmode",f=" Text",g="widgetbrowser/fo_tester.swf",h="100%",i="<i>L</i>",j="browser.name",k="<b>T</b>",l="<i style='color: red;'><b>H</b></i>",m="solid",n="rgba(0, 0, 200, 0.5)",o="bgcolor",p="widgetbrowser/blank.html",q="rgb(200,0,0)",r="<u>M</u>",s="auto",t="html.canvas",u="border-main",v="Browser does not support canvas",w="main",x="this is passed in via FlashVars",y="<div style='background-color: white; text-align: center;'>",z="bold",A='<h1>About</h1><p>qooxdoo (pronounced [ku:ksdu:]) is a comprehensive and innovative Ajax application framework. Leveraging object-oriented JavaScript allows developers to build impressive cross-browser applications. No <acronym title="HyperText Markup Language">HTML</acronym>, <acronym title="Cascading Style Sheets">CSS</acronym> nor <acronym title="Document Object Model">DOM</acronym> knowledge is needed. qooxdoo includes a platform-independent development tool chain, a state-of-the-art <acronym title="Graphical User Interface">GUI</acronym> toolkit and an advanced client-server communication layer. It is Open Source under an <acronym title="GNU Lesser General Public License">LGPL</acronym>/<acronym title="Eclipse Public License">EPL</acronym> dual <a href="http://qooxdoo.org/license" class="wikilink1" title="license">license</a>.</p>',B='Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla f',C="Text with set font (bold)!",D="Canvas",E="Flash",F="ie",G="white",H="noscale",I="#FF6600",J="HtmlArea",K="HTML";qx.Class.define(c,{extend:widgetbrowser.pages.AbstractPage,construct:function(){widgetbrowser.pages.AbstractPage.call(this);var L=new qx.ui.layout.Grid(100,10);L.setColumnFlex(1,1);this.__nh=new qx.ui.container.Composite(L);this.add(this.__nh,{width:h,height:h});this.initWidgets();},members:{__nh:null,initWidgets:function(){var ba=this._widgets;var T;T=new qx.ui.basic.Label(E);this.__nh.add(T,{row:0,column:0});var bb={flashVarText:x};var S=new qx.ui.embed.Flash(g).set({scale:H,width:100,height:200,variables:bb});S.getContentElement().setParam(o,I);ba.push(S);this.__nh.add(S,{row:1,column:0,colSpan:2});T=new qx.ui.basic.Label(D);this.__nh.add(T,{row:2,column:0});if(qx.core.Environment.get(t)){var M=new qx.ui.embed.Canvas().set({width:200,height:200,canvasWidth:200,canvasHeight:200,syncDimension:true});M.addListener(b,this.__NQ,this);ba.push(M);this.__nh.add(M,{row:3,column:0});}else {this.__nh.add(new qx.ui.basic.Label(v),{row:3,column:0});};T=new qx.ui.basic.Label(K);this.__nh.add(T,{row:2,column:1});var X=new qx.ui.container.Composite(new qx.ui.layout.VBox(10));this.__nh.add(X,{row:3,column:1});var U=y+l+k+r+i+f+a;var R=new qx.ui.embed.Html(U);ba.push(R);R.setMaxWidth(200);R.setHeight(20);R.setDecorator(w);X.add(R);var V=C;var Q=new qx.ui.embed.Html(V);ba.push(Q);Q.setMaxWidth(200);Q.setFont(z);Q.setHeight(20);Q.setDecorator(w);X.add(Q);var Y=B;var O=new qx.ui.embed.Html(Y);ba.push(O);O.setOverflow(s,s);O.setDecorator(w);O.setBackgroundColor(G);O.setHeight(150);O.setMaxWidth(200);X.add(O);if(!(qx.core.Environment.get(j)==F&&qx.core.Environment.get(d)==11)){T=new qx.ui.basic.Label(J);this.__nh.add(T,{row:4,column:0});var P=new qx.ui.decoration.Decorator().set({width:1,style:m,color:u});var N=A;var W=new qx.ui.embed.HtmlArea(N,null,qx.util.ResourceManager.getInstance().toUri(p));W.set({width:300,height:150,decorator:P});this.__nh.add(W,{row:5,column:0});ba.push(W);};},__NQ:function(e){var bc=e.getData();var bd=bc.context;bd.fillStyle=q;bd.fillRect(20,20,105,100);bd.fillStyle=n;bd.fillRect(70,70,105,100);}}});})();(function(){var a="sameDomain",b="Boolean",c="quality",d="_applyVariables",e="low",f="_applyLoop",g="opaque",h="scale",i="_applyAllowScriptAccess",j="showall",k="Map",l="wmode",m="Integer",n="_applyMenu",o="loaded",p="_applyPlay",q="loop",r="allowScriptAccess",s="_applyWmode",t="menu",u="noborder",v="loading",w="qx.event.type.Event",x="swLiveConnect",y="qx.ui.embed.Flash",z="String",A="_applyId",B="high",C="",D="transparent",E="exactfit",F="play",G="_applyLiveConnect",H="_applySource",I="appear",J="$$widget",K="medium",L="flash",M="timeout",N="_applyMayScript",O="best",P="_applyQuality",Q="never",R="_applyScale",S="autohigh",T="always",U="window",V="noscale",W="undefined",X="autolow",Y="mayscript";qx.Class.define(y,{extend:qx.ui.core.Widget,construct:function(ba,bb){qx.ui.core.Widget.call(this);{};this.setSource(ba);if(bb){this.setId(bb);}else {this.setId(L+this.toHashCode());};this.initQuality();this.initWmode();this.initAllowScriptAccess();this.initLiveConnect();this.addListenerOnce(I,function(){this._checkLoading();this.getContentElement().createFlash();},this);},events:{"loading":w,"loaded":w,"timeout":w},properties:{source:{check:z,apply:H},id:{check:z,apply:A},quality:{check:[e,X,S,K,B,O],init:O,nullable:true,apply:P},scale:{check:[j,u,E,V],nullable:true,apply:R},wmode:{check:[U,g,D],init:g,nullable:true,apply:s},play:{check:b,nullable:true,apply:p},loop:{check:b,nullable:true,apply:f},mayScript:{check:b,nullable:false,apply:N},menu:{check:b,nullable:true,apply:n},allowScriptAccess:{check:[a,T,Q],init:a,nullable:true,apply:i},liveConnect:{check:b,init:true,nullable:true,apply:G},variables:{init:{},check:k,apply:d},loadTimeout:{check:m,init:10000}},members:{__HQ:null,getFlashElement:function(){var bc=this.getContentElement();if(bc){return bc.getFlashElement();}else {return null;};},isLoaded:function(){return this.getPercentLoaded()===100;},getPercentLoaded:function(){var bd=this.getFlashElement();if(typeof (bd)!=W&&bd!=null){try{return bd.PercentLoaded();}catch(be){return 0;};}else {return 0;};},_createContentElement:function(){var bf=new qx.html.Flash();bf.setAttribute(J,this.toHashCode());return bf;},_checkLoading:function(){var bg=this.getSource();if(bg!=C&&bg!=null&&bg!=W){if(!this.isLoaded()){if(!this.__HQ){this.__HQ=new Date().getTime();};var bh=new Date().getTime()-this.__HQ;if(this.getLoadTimeout()>bh){var bi=qx.util.TimerManager.getInstance();bi.start(this._checkLoading,0,this,null,10);this.fireEvent(v);}else {{};this.fireEvent(M);this.__HQ=null;};}else {this.fireEvent(o);this.__HQ=null;};};},_applySource:function(bl,bk){var bj=qx.util.ResourceManager.getInstance().toUri(bl);this.getContentElement().setSource(bj);qx.ui.core.queue.Layout.add(this);},_applyId:function(bn,bm){this.getContentElement().setId(bn);qx.ui.core.queue.Layout.add(this);},_applyVariables:function(bp,bo){this.getContentElement().setVariables(bp);qx.ui.core.queue.Layout.add(this);},_applyMayScript:function(br,bq){this.getContentElement().setAttribute(Y,br?C:false);qx.ui.core.queue.Layout.add(this);},_applyQuality:function(bt,bs){this.__HR(c,bt);},_applyScale:function(bv,bu){this.__HR(h,bv);},_applyWmode:function(bx,bw){this.__HR(l,bx);},_applyPlay:function(bz,by){this.__HR(F,bz);},_applyLoop:function(bB,bA){this.__HR(q,bB);},_applyMenu:function(bD,bC){this.__HR(t,bD);},_applyAllowScriptAccess:function(bF,bE){this.__HR(r,bF);},_applyLiveConnect:function(bH,bG){this.__HR(x,bH);},__HR:function(bI,bJ){this.getContentElement().setParam(bI,bJ);qx.ui.core.queue.Layout.add(this);}}});})();(function(){var a="qx.util.TimerManager",b="interval",c="singleton";qx.Class.define(a,{extend:qx.core.Object,type:c,statics:{__HS:[],__HT:{},__ug:0},members:{__HU:false,start:function(g,f,h,d,j){if(!j){j=f||0;};var e=(new Date()).getTime()+j;this.self(arguments).__HT[ ++this.self(arguments).__ug]={callback:g,userData:d||null,expireAt:e,recurTime:f,context:h||this};this.__HV(e,this.self(arguments).__ug);return this.self(arguments).__ug;},stop:function(k){var l=this.self(arguments).__HS;var length=l.length;for(var i=0;i<length;i++ ){if(l[i]==k){l.splice(i,1);break;};};delete this.self(arguments).__HT[k];if(l.length==0&&this.__HU){qx.event.Idle.getInstance().removeListener(b,this.__HW,this);this.__HU=false;};},__HV:function(m,p){var o=this.self(arguments).__HS;var n=this.self(arguments).__HT;var length=o.length;for(var i=0;i<length;i++ ){if(n[o[i]].expireAt>m){o.splice(i,0,p);break;};};if(o.length==length){o.push(p);};if(!this.__HU){qx.event.Idle.getInstance().addListener(b,this.__HW,this);this.__HU=true;};},__HW:function(){var r=(new Date()).getTime();var t=this.self(arguments).__HS;var s=this.self(arguments).__HT;while(t.length>0&&s[t[0]].expireAt<=r){var v=t.shift();var q=s[v];q.callback.call(q.context,q.userData,v);if(q.recurTime&&s[v]){var u=(new Date()).getTime();q.expireAt=u+q.recurTime;this.__HV(q.expireAt,v);}else {delete s[v];};};if(t.length==0&&this.__HU){qx.event.Idle.getInstance().removeListener(b,this.__HW,this);this.__HU=false;};}}});})();(function(){var a="$$",b="The id cannot be modified after initial creation",c="The variables cannot be modified after initial creation",d="$$widget",e="movie",f="div",g="The source cannot be modified after initial creation",h="The params cannot be modified after initial creation",i="The attributes cannot be modified after initial creation",j="id",k="qx.html.Flash";qx.Class.define(k,{extend:qx.html.Element,construct:function(l,m){qx.html.Element.call(this,f,l,m);this.__HX={};this.__HY={};this.__Ia={};},members:{__HX:null,__Ia:null,__HY:null,__Ib:null,_createDomElement:function(){return qx.dom.Element.create(f);},createFlash:function(){this.__Ib=qx.bom.Flash.create(this.getDomElement(),this.getAttributes(),this.__HY,this.__HX);},setSource:function(n){{};if(this.__Ib){throw new Error(g);};this.setAttribute(e,n);},setId:function(o){{};if(this.__Ib){throw new Error(b);};this.setAttribute(j,o);},getVariables:function(){return this.__HY;},setVariables:function(p){{};if(this.__Ib){throw new Error(c);};this.__HY=p;},getAttributes:function(){return this.__Ia;},setAttribute:function(q,r){{};if(q==d||q.indexOf(a)===0){qx.html.Element.prototype.setAttribute.call(this,q,r);}else if(this.__Ib){throw new Error(i);};if(r===null||r===undefined){delete this.__Ia[q];}else {this.__Ia[q]=r;};},getParams:function(){return this.__HX;},setParam:function(s,t){{};if(this.__Ib){throw new Error(h);};if(t===null||t===undefined){delete this.__HX[s];}else {this.__HX[s]=t;};},getFlashElement:function(){return this.__Ib;}},destruct:function(){if(this.__Ib){qx.bom.Flash.destroy(this.__Ib);};this.__HX=this.__HY=this.__Ia=null;}});})();(function(){var a="function",b="application/x-shockwave-flash",c="DOM element is null or undefined!",d="param",e='" />',f="100%",g="qx.bom.Flash",h='<param name="',j="type",k="load",l="name",m="data",n='</object>',o="",p="mshtml",q='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" $$widget="',r='">',s="movie",t='" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" $$widget="',u="DOM element has or is not a flash object!",v="value",w="&",x="engine.name",y="beforeunload",z="$$widget",A='<object id="',B="=",C='" value="',D="undefined",E="object";qx.Class.define(g,{statics:{_flashObjects:{},create:function(I,K,G,J,F){if(!F){F=window;};{};if(!K.width){K.width=f;};if(!K.height){K.height=f;};J=J?qx.lang.Object.clone(J):{};if(!J[s]){J[s]=K.movie;};K[m]=K.movie;delete K.movie;if(G){for(var name in G){if(typeof J.flashvars!=D){J.flashvars+=w+name+B+G[name];}else {J.flashvars=name+B+G[name];};};};var H=this.__Ih(I,K,J,F);this._flashObjects[K.id]=H;return H;},destroy:qx.core.Environment.select(x,{"mshtml":function(M,L){M=this.__Ic(M);if(M.readyState==4){this.__Id(M);}else {if(!L){L=window;};qx.bom.Event.addNativeListener(L,k,function(){qx.bom.Flash.__Id(M);});};},"default":function(O,N){O=this.__Ic(O);if(O.parentNode){O.parentNode.removeChild(O);};delete this._flashObjects[O.id];}}),__Ic:function(P){if(!P){throw new Error(c);};if(P.tagName.toLowerCase()!==E){P=P.firstChild;};if(!P||P.tagName.toLowerCase()!==E){throw new Error(u);};return P;},__Id:qx.core.Environment.select(x,{"mshtml":qx.event.GlobalError.observeMethod(function(Q){for(var i in Q){if(typeof Q[i]==a){Q[i]=null;};};if(Q.parentNode){Q.parentNode.removeChild(Q);};delete this._flashObjects[Q.id];}),"default":null}),__Ie:qx.event.GlobalError.observeMethod(function(){for(var R in qx.bom.Flash._flashObjects){qx.bom.Flash.destroy(qx.bom.Flash._flashObjects[R]);};window.__If=function(){};window.__Ig=function(){};qx.bom.Event.removeNativeListener(window,y,qx.bom.Flash.__Ie);}),__Ih:qx.core.Environment.select(x,{"mshtml":function(U,W,V,S){V.movie=W.data;delete W.data;delete W.classid;var T=o;for(name in V){T+=h+name+C+V[name]+e;};if(W.id){U.innerHTML=A+W.id+t+W.$$widget+r+T+n;delete W.id;}else {U.innerHTML=q+W.$$widget+r+T+n;};for(var name in W){if(name!=z){U.firstChild.setAttribute(name,W[name]);};};return U.firstChild;},"default":function(bd,bc,bb,X){delete bc.classid;delete bb.movie;var ba=qx.dom.Element.create(E,bc,X);ba.setAttribute(j,b);var Y;for(var name in bb){Y=qx.dom.Element.create(d,{},X);Y.setAttribute(l,name);Y.setAttribute(v,bb[name]);ba.appendChild(Y);};bd.appendChild(ba);return ba;}})},defer:function(be){if(qx.core.Environment.get(x)==p){qx.bom.Event.addNativeListener(window,y,be.__Ie);};}});})();(function(){var a="resize",b="_applyCanvasWidth",c="redraw",d="Boolean",f="__Ha",g="_applyCanvasHeight",h="qx.ui.embed.Canvas",i="Integer",j="qx.event.type.Data";qx.Class.define(h,{extend:qx.ui.core.Widget,construct:function(l,k){qx.ui.core.Widget.call(this);this.__Ha=new qx.util.DeferredCall(this.__Hb,this);this.addListener(a,this._onResize,this);if(l!==undefined){this.setCanvasWidth(l);};if(k!==undefined){this.setCanvasHeight(k);};},events:{"redraw":j},properties:{syncDimension:{check:d,init:false},canvasWidth:{check:i,init:300,apply:b},canvasHeight:{check:i,init:150,apply:g}},members:{__Ha:null,_createContentElement:function(){return new qx.html.Canvas();},__Hb:function(){var n=this.getContentElement();var p=n.getHeight();var m=n.getWidth();var o=n.getContext2d();this._draw(m,p,o);this.fireNonBubblingEvent(c,qx.event.type.Data,[{width:m,height:p,context:o}]);},_applyCanvasWidth:function(r,q){this.getContentElement().setWidth(r);this.__Ha.schedule();},_applyCanvasHeight:function(t,s){this.getContentElement().setHeight(t);this.__Ha.schedule();},update:function(){this.__Ha.schedule();},_onResize:function(e){var u=e.getData();if(this.getSyncDimension()){this.setCanvasHeight(u.height);this.setCanvasWidth(u.width);};},getContext2d:function(){return this.getContentElement().getContext2d();},_draw:function(v,x,w){}},destruct:function(){this._disposeObjects(f);}});})();(function(){var a="canvas",b="2d",c="qx.html.Canvas";qx.Class.define(c,{extend:qx.html.Element,construct:function(d,e){qx.html.Element.call(this,a,d,e);this.__jf=document.createElement(a);},members:{__jf:null,_createDomElement:function(){return this.__jf;},getCanvas:function(){return this.__jf;},setWidth:function(f){this.__jf.width=f;},getWidth:function(){return this.__jf.width;},setHeight:function(g){this.__jf.height=g;},getHeight:function(){return this.__jf.height;},getContext2d:function(){return this.__jf.getContext(b);}},destruct:function(){this.__jf=null;}});})();(function(){var a="_applyOverflowX",b="_applyOverflowY",c="auto",d="overflowX",e="visible",f="hidden",g="qx.ui.core.MNativeOverflow",h="scroll",i="overflowY";qx.Mixin.define(g,{properties:{overflowX:{check:[f,e,h,c],nullable:true,apply:a},overflowY:{check:[f,e,h,c],nullable:true,apply:b},overflow:{group:[d,i]}},members:{_applyOverflowX:function(j){this.getContentElement().setStyle(d,j);},_applyOverflowY:function(k){this.getContentElement().setStyle(i,k);}}});})();(function(){var a="mshtml",b="engine.name",c="relative",d="",e="text",f="none",g="position",h="webkit",i="changeHtml",j="_applyCssClass",k="qx.ui.embed.Html",l="_applyHtml",m="userSelect",n="color",o="String",p="browser.documentmode",q="html";qx.Class.define(k,{extend:qx.ui.core.Widget,include:[qx.ui.core.MNativeOverflow],construct:function(r){qx.ui.core.Widget.call(this);if(r!=null){this.setHtml(r);};},properties:{html:{check:o,apply:l,event:i,nullable:true},cssClass:{check:o,init:d,apply:j},selectable:{refine:true,init:true},focusable:{refine:true,init:true}},members:{getFocusElement:function(){return this.getContentElement();},_applyHtml:function(u,s){var t=this.getContentElement();if(qx.core.Environment.get(b)==a&&qx.core.Environment.get(p)==9){t.setStyle(g,c);};t.setAttribute(q,u||d);},_applyCssClass:function(w,v){this.getContentElement().removeClass(v);this.getContentElement().addClass(w);},_applySelectable:function(x){qx.ui.core.Widget.prototype._applySelectable.call(this,x);if((qx.core.Environment.get(b)==h)){this.getContentElement().setStyle(m,x?e:f);};},_applyFont:function(A,z){var y=A?qx.theme.manager.Font.getInstance().resolve(A).getStyles():qx.bom.Font.getDefaultStyles();if(this.getTextColor()!=null){delete y[n];};this.getContentElement().setStyles(y);},_applyTextColor:function(C,B){if(C){this.getContentElement().setStyle(n,qx.theme.manager.Color.getInstance().resolve(C));}else {this.getContentElement().removeStyle(n);};}}});})();(function(){var a="xhtml",b="_applyUseUndoRedo",c="mousedown",d="Boolean",f="focusOut",g="_applyMessengerMode",h="url(",i=")",j="InsertParagraphOnLinebreak",k="gecko",l="repeat",m="undoRedoState",n="div",o="messengerContent",p="Integer",q="100%",r="__vT",s="NativeContextMenu",t="qx.event.type.Data",u="focused",v="Function",w="_applyInsertParagraphOnLinebreak",x="__wi",y="PostProcess",z="_applyInsertLinebreakOnCtrlEnter",A="ContentType",B="px",C="qx.event.type.Event",D="set",E="DOMNodeRemoved",F="DefaultFontSize",G="cursorContext",H="String",I="htmlarea",J="ready",K="loadingError",L="MessengerMode",M="none",N="_applyDefaultFontSize",O="engine.name",P="UseUndoRedo",Q="appear",R="_applyDefaultFontFamily",S="_applyContentType",T="qx.ui.embed.HtmlArea",U="mshtml",V="Verdana",W="mouseup",X="block",Y="DefaultFontFamily",bm="losecapture",bn="contextmenu",bo="readyAfterInvalid",bi="InsertLinebreakOnCtrlEnter",bj="display",bk="qx/static/blank.gif",bl="_applyPostProcess",bp="absolute";qx.Class.define(T,{extend:qx.ui.core.Widget,construct:function(bs,bt,br){this.__wg={};qx.ui.core.Widget.call(this);this._setLayout(new qx.ui.layout.Grow);var bq=new qx.html.Element();bq.setStyles({width:q,height:q});this.getContentElement().add(bq);this.__wk();this.__wh={content:bs,styleInfo:bt,source:br};qx.event.Registration.addListener(document.body,c,this.block,this,true);qx.event.Registration.addListener(document.body,W,this.release,this,true);qx.event.Registration.addListener(document.body,bm,this.release,this,true);},events:{"loadingError":t,"messengerContent":t,"cursorContext":t,"ready":C,"readyAfterInvalid":C,"focused":C,"focusOut":C,"contextmenu":t,"undoRedoState":t},statics:{isParagraphParent:function(bu){return qx.bom.htmlarea.HtmlArea.isParagraphParent(bu);}},properties:{contentType:{check:H,init:a,apply:S},messengerMode:{check:d,init:false,apply:g},insertParagraphOnLinebreak:{check:d,init:true,apply:w},insertLinebreakOnCtrlEnter:{check:d,init:true,apply:z},postProcess:{check:v,nullable:true,init:null,apply:bl},useUndoRedo:{check:d,init:true,apply:b},appearance:{refine:true,init:I},defaultFontFamily:{check:H,init:V,apply:R},defaultFontSize:{check:p,init:4,apply:N},focusable:{refine:true,init:true}},members:{__vT:null,__wg:null,__wi:null,__wh:null,__wj:null,_initBlockerElement:function(){if(!this.__wi){this.__wi=this._createBlockerElement();};},_applyContentType:function(bw,bv){if(this.__vT!=null){this.__vT.setContentType(bw);}else {this.__wg[A]=bw;};},_applyMessengerMode:function(by,bx){if(this.__vT!=null){this.__vT.setMessengerMode(by);}else {this.__wg[L]=by;};},_applyInsertParagraphOnLinebreak:function(bA,bz){if(this.__vT!=null){this.__vT.setInsertParagraphOnLinebreak(bA);}else {this.__wg[j]=bA;};},_applyInsertLinebreakOnCtrlEnter:function(bC,bB){if(this.__vT!=null){this.__vT.setInsertLinebreakOnCtrlEnter(bC);}else {this.__wg[bi]=bC;};},_applyPostProcess:function(bE,bD){if(this.__vT!=null){this.__vT.setPostProcess(bE);}else {this.__wg[y]=bE;};},_applyUseUndoRedo:function(bG,bF){if(this.__vT!=null){this.__vT.setUseUndoRedo(bG);}else {this.__wg[P]=bG;};},_applyDefaultFontFamily:function(bI,bH){if(this.__vT!=null){this.__vT.setDefaultFontFamily(bI);}else {this.__wg[Y]=bI;};},_applyDefaultFontSize:function(bK,bJ){if(this.__vT!=null){this.__vT.setDefaultFontSize(bK);}else {this.__wg[F]=bK;};},_applyNativeContextMenu:function(bM,bL){if(this.__vT!=null){this.__vT.setNativeContextMenu(bM);}else {this.__wg[s]=bM;};},_createBlockerElement:function(){var bN=new qx.html.Element(n);bN.setStyles({zIndex:20,position:bp,display:M});if((qx.core.Environment.get(O)==U)){bN.setStyles({backgroundImage:h+qx.util.ResourceManager.getInstance().toUri(bk)+i,backgroundRepeat:l});};return bN;},__wk:function(){this.addListenerOnce(Q,this.__wl);},__wl:function(){var bO=this.getContentElement().getChildren()[0].getDomElement();this.__vT=new qx.bom.htmlarea.HtmlArea(bO,this.__wh.content,this.__wh.styleInfo,this.__wh.source);this.__wm();this.__wn();if((qx.core.Environment.get(O)==k)){this.__wq();};this.addListener(Q,this.forceEditable);},__wm:function(){for(var bP in this.__wg){this.__vT[D+bP](this.__wg[bP]);};},__wn:function(){this.__vT.addListener(J,this.__wo,this);this.__vT.addListener(bo,this.__wo,this);this.__vT.addListener(u,this.__wo,this);this.__vT.addListener(f,this.__wo,this);this.__vT.addListener(K,this.__wp,this);this.__vT.addListener(G,this.__wp,this);this.__vT.addListener(bn,this.__wp,this);this.__vT.addListener(m,this.__wp,this);this.__vT.addListener(o,this.__wp,this);},__wo:function(e){var bQ=e.clone();this.fireEvent(bQ.getType());},__wp:function(e){var bR=e.clone();this.fireDataEvent(bR.getType(),e.getData());},__wq:function(){this.__wj=qx.lang.Function.bind(this.__wr,this);var bS=this.getContentElement().getDomElement();qx.bom.Event.addNativeListener(bS,E,this.__wj);},__wr:qx.event.GlobalError.observeMethod(function(e){if(this.__vT&&!this.__vT.isDisposed()){this.__vT.invalidateEditor();};}),renderLayout:function(bX,top,bV,bT){qx.ui.core.Widget.prototype.renderLayout.call(this,bX,top,bV,bT);var bW=B;var bU=this.getInsets();if(!this.__wi){this._initBlockerElement();};this.__wi.setStyles({left:bU.left+bW,top:bU.top+bW,width:(bV-bU.left-bU.right)+bW,height:(bT-bU.top-bU.bottom)+bW});},getIframeObject:function(){return this.__vT!=null?this.__vT.getIframeObject():null;},getCommandManager:function(){return this.__vT!=null?this.__vT.getCommandManager():null;},setValue:function(bY){if(this.__vT!=null){this.__vT.setValue(bY);}else {this.__wh.content=bY;};},getValue:function(){if(this.__vT!=null){return this.__vT.getValue();}else {return this.__wh.content;};},getComputedValue:function(ca){return this.__vT!=null?this.__vT.getHtml(ca):null;},getCompleteHtml:function(){return this.__vT!=null?this.__vT.getCompleteHtml():null;},getContentDocument:function(){return this.__vT!=null?this.__vT.getContentDocument():null;},getContentBody:function(){return this.__vT!=null?this.__vT.getContentBody():null;},getContentWindow:function(){return this.__vT!=null?this.__vT.getContentWindow():null;},getWords:function(cb){return this.__vT!=null?this.__vT.getWords(cb):null;},getWordsWithElement:function(){return this.__vT!=null?this.__vT.getWordsWithElement():null;},getTextNodes:function(){return this.__vT!=null?this.__vT.getTextNodes():null;},isReady:function(){return this.__vT!=null?this.__vT.isReady():false;},forceEditable:function(){if(this.__vT!=null){this.__vT.forceEditable();};},isLoaded:function(){return this.__vT!=null?this.__vT.isLoaded():false;},setEditable:function(cc){if(this.__vT!=null){this.__vT.setEditable(cc);};},getEditable:function(){return this.__vT!=null?this.__vT.getEditable():false;},isEditable:function(){return this.__vT!=null?this.__vT.isEditable():false;},insertHtml:function(cd){return this.__vT!=null?this.__vT.insertHtml(cd):false;},removeFormat:function(){return this.__vT!=null?this.__vT.removeFormat():false;},setBold:function(){return this.__vT!=null?this.__vT.setBold():false;},setItalic:function(){return this.__vT!=null?this.__vT.setItalic():false;},setUnderline:function(){return this.__vT!=null?this.__vT.setUnderline():false;},setStrikeThrough:function(){return this.__vT!=null?this.__vT.setStrikeThrough():false;},setFontSize:function(ce){return this.__vT!=null?this.__vT.setFontSize(ce):false;},setFontFamily:function(cf){return this.__vT!=null?this.__vT.setFontFamily(cf):false;},setTextForegroundColor:function(cg){return this.__vT!=null?this.__vT.setTextColor(cg):false;},setTextBackgroundColor:function(ch){return this.__vT!=null?this.__vT.setTextBackgroundColor(ch):false;},setJustifyLeft:function(){return this.__vT!=null?this.__vT.setJustifyLeft():false;},setJustifyCenter:function(){return this.__vT!=null?this.__vT.setJustifyCenter():false;},setJustifyRight:function(){return this.__vT!=null?this.__vT.setJustifyRight():false;},setJustifyFull:function(){return this.__vT!=null?this.__vT.setJustifyFull():false;},insertIndent:function(){return this.__vT!=null?this.__vT.insertIndent():false;},insertOutdent:function(){return this.__vT!=null?this.__vT.insertOutdent():false;},insertOrderedList:function(){return this.__vT!=null?this.__vT.insertOrderedList():false;},insertUnorderedList:function(){return this.__vT!=null?this.__vT.insertUnorderedList():false;},insertHorizontalRuler:function(){return this.__vT!=null?this.__vT.insertHorizontalRuler():false;},insertImage:function(ci){return this.__vT!=null?this.__vT.insertImage(ci):false;},insertHyperLink:function(cj){return this.__vT!=null?this.__vT.insertHyperLink(cj):false;},removeBackgroundColor:function(){return this.__vT!=null?this.__vT.removeBackgroundColor():false;},_applyBackgroundColor:function(ck){qx.ui.core.Widget.prototype._applyBackgroundColor.call(this,ck);this.__vT!=null?this.__vT.setBackgroundColor(ck):false;},removeBackgroundImage:function(){return this.__vT!=null?this.__vT.removeBackgroundImage():false;},setBackgroundImage:function(cl,cn,cm){return this.__vT!=null?this.__vT.setBackgroundImage(cl,cn,cm):false;},selectAll:function(){return this.__vT!=null?this.__vT.selectAll():false;},undo:function(){return this.__vT!=null?this.__vT.undo():false;},redo:function(){return this.__vT!=null?this.__vT.redo():false;},resetHtml:function(){if(this.__vT!=null){this.__vT.resetHtml();};},getHtml:function(co){return this.__vT!=null?this.__vT.getHtml(co):null;},containsOnlyPlaceholder:function(){return this.__vT!=null?this.__vT.containsOnlyPlaceHolder():false;},getContextInformation:function(){return this.__vT!=null?this.__vT.getContextInformation():null;},getSelection:function(){return this.__vT!=null?this.__vT.getSelection():null;},getSelectedText:function(){return this.__vT!=null?this.__vT.getSelectedText():null;},getSelectedHtml:function(){return this.__vT!=null?this.__vT.getSelectedHtml():null;},clearSelection:function(){if(this.__vT!=null){this.__vT.clearSelection();};},getRange:function(){return this.__vT.getRange();},saveRange:function(){this.__vT.saveRange();},getSavedRange:function(){return this.__vT.getSavedRange();},resetSavedRange:function(){this.__vT.resetSavedRange();},getFocusNode:function(){return this.__vT!=null?this.__vT.getFocusNode():null;},block:function(){if(!this.__wi){this._initBlockerElement();};if(!this.getContentElement().hasChild(this.__wi)){this.getContentElement().add(this.__wi);};this.__wi.setStyle(bj,X);},release:function(){if(this.__wi){this.__wi.setStyle(bj,M);};},focus:function(){qx.ui.core.Widget.prototype.focus.call(this);this.__ws();},tabFocus:function(){qx.ui.core.Widget.prototype.tabFocus.call(this);this.__ws();},__ws:function(){if(this.__vT!=null){qx.event.Timer.once(function(){this.__vT.focusContent();},this,0);};}},destruct:function(){this.__wg=this.__wh=null;qx.event.Registration.removeListener(document.body,c,this.block,this,true);qx.event.Registration.removeListener(document.body,W,this.release,this,true);qx.event.Registration.removeListener(document.body,bm,this.release,this,true);var cp=this.getContentElement().getDomElement();if(cp){qx.bom.Event.removeNativeListener(cp,E,this.__wj);};this._disposeObjects(x,r);}});})();(function(){var b="qx.blankpage",c='</span>',d="backgroundColor",f="li",g="pageup",h='undo',k="engine.version",l="backgroundcolor",m="Failed to enable rich edit functionality",n="end",o="<br class='webkit-block-placeholder' />",p="div",q="textbackgroundcolor",r="qx.event.type.Data",t="Function",u='On',v="fontSize",w="textcolor",x="cant open document on source '",y='html { margin:0px; padding:0px; } body { font-size: 100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; width:100%; height:100%; background-color:transparent; overflow:auto; background-image:none; margin:0px; padding:5px; } ',z="<",A="focused",B="fontFamily",C="load",D='<font ',E='id="__elementToFocus__"',F="setUnderline",G="backgroundPosition",H="redo",I="<!--",J=' size="',K="i",L="'>",M='underline',N="opera",O='bold',P="&copy;",Q="ul",R='<p><span style="font-family:',S="backspace",T="cursorContext",U="bold",V="mouseup",W="enter",X="y",Y="readyAfterInvalid",fz='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',fv="inserthtml",fA="span",fw=" />",fx="id",ft="style",fy="setBold",fF="<P>&nbsp;</P>",fG="</",fM="&gt;",fH='="',fB="can't extract style from elem. ",fC="paddingLeft",fD="backgroundimage",fE='size',fL="<p>&nbsp;</p>",gr="100%",fN="inserthorizontalrule",fO='</head>',fI='"',fJ='<head>',hr="k",fK="backgroundRepeat",fP="qx.event.type.Event",fQ=":",fR='redo',fW="a",fX="&amp;",fY='Off',fS="removeformat",fT="marginLeft",fU="ready",fV="home",ge="about:blank",gf="left",gg="italic",gh='">',ga="browser.version",gb=" html, body {overflow-x: visible; } ",gc='<body>',gd="insertorderedlist",gm="down",gn="> ",hy="font-family",go="mshtml",gi="g",gj="hideFocus",gk="keypress",gl="none",gp=" ",gq="outline",gB="fontsize",gA="setItalic",gz="font-style",gF="body",gE="marginBottom",gD="undo",gC="xhtml",gv="Boolean",gu="focusOut",gt="text-decoration",gs="justifyleft",gy='</p>',gx="gecko",gw="paddingTop",gM="underline",gL="br",gK='</font>',gJ='<title></title><meta http-equiv="Content-type" content="text/html; charset=UTF-8" />',gQ='<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">',gP="Control",gO="pagedown",gN="text-align",gI="placeholder",gH='cant load HtmlArea. Document is not available. ',gG="justify",hc="backgroundImage",hb="center",ha="marginTop",hg=" { ",hf="font-weight",he="LI",hd="p",gU='italic',gT="styleWithCSS",gS='html { width:100%; height:100%; margin:0px; padding:0px; overflow-y:auto; overflow-x:auto; } body { font-size:100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; background-color:transparent; overflow:visible; background-image:none; margin:0px; padding:5px; } ',gR='</style>',gY="\ufeff",gX="u",gW="right",gV="focus",hm="&quot;",hl="marginRight",hk="STYLE",hj="__elementToFocus__",hq="justifyfull",hp="control",ho="engine.name",hn="click",hi="inserthyperlink",hh="<br />",eA='<style type="text/css">',ez="old_id",hz="<br>",ew="contextmenu",ey="justifycenter",ev="<br /><div id='placeholder'></div>",hx="up",et="useCSS",eu="object",es="strikethrough",hv="__wv",eq="blur",er="font-size",ep="None",eJ="text/html",eK="true",eH="1.9",eI='',eF=' style="',eG="indent",eE="messengerContent",eo="Integer",eC="insertunorderedlist",eD="Text",eB="'",eX="delete",eV="&lt;",eW="_moz_dirty",eT=">",eU='<br _moz_editor_bogus_node="TRUE" _moz_dirty=""/>',eS="b",hu='</body></html>',eQ='<br/><div class="placeholder"></div>',eR="selectall",eP="transparent",hw="line-through",eN="String",eO=" SCRIPT STYLE DIV SPAN TR TD TBODY TABLE EM STRONG FONT A P B I U STRIKE H1 H2 H3 H4 H5 H6 ",eL="z",eM="justifyright",fg="ol",fh=";",fe="",ff="//text()[string-length(normalize-space(.))>0]",fc="outdent",fd="<div></div>",fb="fontfamily",ht="<body style='",eY="qx.bom.htmlarea.HtmlArea",fa="paddingBottom",fs="keydown",hs="keyup",fu="loadingError",fp="Verdana",fo="focusout",fr="$",fq="-->",fl=" }",fk="webkit",fn="paddingRight",fm="insertimage",fi="Off",fj='p { margin:0px; padding:0px; }';qx.Class.define(eY,{extend:qx.core.Object,construct:function(hB,hD,hE,hA){qx.core.Object.call(this);var hC=hA||qx.util.ResourceManager.getInstance().toUri(qx.core.Environment.get(b));this.__wM(hB);this.__wN();this._createAndAddIframe(hC);this._addIframeLoadListener();this.__wt=qx.bom.htmlarea.HtmlArea.__ww(hE);if(qx.lang.Type.isString(hD)){this.__wu=hD;};this.__wv=this.__xb();},events:{"load":fP,"loadingError":r,"messengerContent":r,"cursorContext":r,"ready":fP,"readyAfterInvalid":fP,"focused":fP,"focusOut":fP,"contextmenu":r,"undoRedoState":r},statics:{simpleLinebreak:hz,EMPTY_DIV:fd,GetWordsRegExp:/([^\u0000-\u0040\u005b-\u005f\u007b-\u007f]|['])+/g,CleanupWordsRegExp:/[\u0000-\u0040]/gi,hotkeyInfo:{bold:{method:fy},italic:{method:gA},underline:{method:F},undo:{method:gD},redo:{method:H}},__ww:function(hG){if(hG==null||hG==fe){return fe;}else if(typeof hG==eu){var hF=fe;for(var i in hG){hF+=i+hg+hG[i]+fl;};return hF;}else {return hG;};},__wx:function(hL){var hH={};var a=hL.split(fh);var i;for(i=0;i<a.length;i++ ){var hI=a[i],hJ=hI.indexOf(fQ);if(hJ===-1){continue;};var name=hI.substring(0,hJ).trim();var hK=hI.substring(hJ+1,hI.length).trim();if(name&&hK){hH[name]=hK;};};return hH;},__wy:function(hX,hN,hU,hT){var hP=[];switch(hX.nodeType){case 1:case 11:var i;var hO=hX.tagName.toLowerCase();var hV={};var hM={};var closed=(!(hX.hasChildNodes()||qx.bom.htmlarea.HtmlArea.__wz(hX)));if(hN){if((qx.core.Environment.get(ho)==go)){if(hO==p&&hX.className&&hX.className==gI){for(i=hX.firstChild;i;i=i.nextSibling){hP.push(qx.bom.htmlarea.HtmlArea.__wy(i,true,hU,hT));};return hP.join(fe);};};var hS=hX.attributes;var hQ=hS.length;var a;if((qx.core.Environment.get(ho)==gx)){if(hO==fA&&hQ==1&&hS[0].name==eW&&hX.childNodes.length==0){return fe;};};for(i=0;i<hQ;i++ ){a=hS[i];if(!a.specified){continue;};var name=qx.dom.Node.getName(a);var hW=a.nodeValue;if(/(_moz|contenteditable)/.test(name)){continue;};if(name!=ft){if(qx.core.Environment.get(ho)==go){if(name==fx&&hX.getAttribute(ez)){hW=hX.getAttribute(ez);}else if(!isNaN(hW)){hW=hX.getAttribute(name);}else {hW=a.nodeValue;};}else {hW=a.nodeValue;};}else {hW=hX.style.cssText;};if(/(_moz|^$)/.test(hW)){continue;};if(name==ez){continue;};if(!hW){continue;};if(name==fx&&hW==hj){continue;};if(name.charAt(0)===fr){continue;};hV[name]=hW;};if(hV.style!==undefined){hM=qx.bom.htmlarea.HtmlArea.__wx(hV.style);delete hV.style;};if(hT){var hR={domElement:hX,tag:hO,attributes:hV,styles:hM};hT(hR);hR.domElement=null;hO=hR.tag;};if(hO){hP.push(z,hO);for(var name in hV){var hW=hV[name];hP.push(gp,name,fH,hW.toString().replace(new RegExp(fI,gi),eB),fI);};if(!qx.lang.Object.isEmpty(hM)){hP.push(eF);for(var name in hM){var hW=hM[name];hP.push(name,fQ,hW.toString().replace(new RegExp(fI,gi),eB),fh);};hP.push(fI);};hP.push(closed?fw:eT);};};for(i=hX.firstChild;i;i=i.nextSibling){hP.push(qx.bom.htmlarea.HtmlArea.__wy(i,true,hU,hT));};if(hN&&!closed&&hO){hP.push(fG,hO,eT);};break;case 3:hP.push(hU?hX.data:qx.bom.htmlarea.HtmlArea.__wA(hX.data));break;case 8:hP.push(I,hX.data,fq);break;};return hP.join(fe);},closingTags:eO,__wz:function(hY){return (qx.bom.htmlarea.HtmlArea.closingTags.indexOf(gp+hY.tagName+gp)!=-1);},__wA:function(s){s=s.replace(/&/ig,fX);s=s.replace(/</ig,eV);s=s.replace(/>/ig,fM);s=s.replace(/\x22/ig,hm);s=s.replace(/\xA9/ig,P);return s;},isParagraphParent:function(ia){if(!qx.dom.Node.isElement(ia)){return false;};ia=qx.dom.Node.getName(ia);return /^(body|td|th|caption|fieldset|div)$/.test(ia);},isHeadlineNode:function(ib){if(!qx.dom.Node.isElement(ib)){return false;};var ic=qx.dom.Node.getName(ib);return /^h[1-6]$/.test(ic);}},properties:{contentType:{check:eN,init:gC},messengerMode:{check:gv,init:false},insertParagraphOnLinebreak:{check:gv,init:true},insertLinebreakOnCtrlEnter:{check:gv,init:true},postProcess:{check:t,nullable:true,init:null},useUndoRedo:{check:gv,init:true},nativeContextMenu:{check:gv,init:false},defaultFontFamily:{check:eN,init:fp},defaultFontSize:{check:eo,init:4}},members:{__lH:null,__ea:false,__wB:false,__wC:false,__wD:false,__wE:false,__wv:null,__wF:null,__wG:null,__wH:null,__tb:null,__wt:null,__wI:null,__wJ:null,__wK:false,__wL:false,__wM:function(id){if(qx.dom.Node.isElement(id)&&qx.dom.Node.isNodeName(id,p)){this.__lH=id;};},_createAndAddIframe:function(ie){this.__tb=qx.bom.Iframe.create();qx.bom.Iframe.setSource(this.__tb,ie);if((qx.core.Environment.get(ho)==go)){qx.bom.element.Attribute.set(this.__tb,gj,eK);}else {qx.bom.element.Style.set(this.__tb,gq,gl);};qx.bom.element.Style.setStyles(this.__tb,{width:gr,height:gr});qx.dom.Element.insertBegin(this.__tb,this.__lH);},_getIframeDocument:function(){return qx.bom.Iframe.getDocument(this.__tb);},_getIframeWindow:function(){return qx.bom.Iframe.getWindow(this.__tb);},_addIframeLoadListener:function(){qx.event.Registration.addListener(this.__tb,C,this._loaded,this);},__wN:function(){this.__wI={"xhtml":{doctype:fz,html:gQ,meta:gJ,style:qx.core.Environment.select(ho,{"mshtml":y,"default":gS}),contentStyle:fj,body:gc,footer:hu}};},__wu:fe,getIframeObject:function(){return this.__tb;},getCommandManager:function(){return this.__wv;},setValue:function(ih){if(qx.lang.Type.isString(ih)){this.__wu=ih;var ig=this._getIframeDocument();if(ig&&ig.body){ig.body.innerHTML=this.__wO(ih);};};},__wO:function(il){var ik=fe;if((qx.core.Environment.get(ho)==gx)){if(qx.core.Environment.get(ga)<=2){ik+=eU;};};var im=il.length==0?gY:fe;var ij=qx.core.Environment.get(ho)==gx||qx.core.Environment.get(ho)==fk?E:eI;var ii=R+this.getDefaultFontFamily()+gh+D+ij+J+this.getDefaultFontSize()+gh+ik+il+im+gK+c+gy;return ii;},getValue:function(){return this.__wu;},getComputedValue:function(io){return this.getHtml(io);},getCompleteHtml:function(){var iq=this.__wI[this.getContentType()];var ip=iq.html+fJ+iq.meta+eA+iq.contentStyle+gR+fO;ip+=ht+this.__wP()+L;ip+=this.getHtml()+hu;return ip;},__wP:function(){var iu=[d,hc,fK,G,B,v,ha,gE,fT,hl,gw,fa,fC,fn];var is=qx.bom.element.Style;var ir=this.getContentBody();var iw={};var it,ix;var iv=qx.core.Environment.get(ho)==go?2:1;for(var i=0,j=iu.length;i<j;i++ ){it=iu[i];ix=is.get(ir,it,iv);if(ix!==undefined&&ix!=fe){iw[it]=ix;};};return qx.bom.element.Style.compile(iw);},getContentDocument:function(){if(this.__ea){return this._getIframeDocument();};},getContentBody:function(){if(this.__ea){return this._getIframeDocument().body;};},getContentWindow:function(){if(this.__ea){return this._getIframeWindow();};},getWords:function(iy){if(!iy){iy=this.getContentBody();};if(!iy){return [];};var iA=iy.cloneNode(true);var iC=iA.innerHTML;iC=iC.replace(/>/gi,gn);iC=iC.replace(/\n/gi,gp);iC=iC.replace(/<!--.*-->/gi,fe);iA.innerHTML=iC;var iz=qx.core.Environment.get(ho)==go||qx.core.Environment.get(ho)==N?iA.innerText:iA.textContent;var iB=iz.match(qx.bom.htmlarea.HtmlArea.GetWordsRegExp);return !iB?[]:iB;},getWordsWithElement:function(){var iE=this.getTextNodes();var iI={};var i,j,iJ,iF,iD;for(var i=0,iH=iE.length;i<iH; ++i){iF=iE[i];iJ=iF.nodeValue.split(gp);for(var j=0,iG=iJ.length;j<iG; ++j){iD=this._cleanupWord(iJ[j]);if(iD!=null&&iD.length>1){if(!iI[iD]){iI[iD]=[];};iI[iD].push(iF);};};};return iI;},_cleanupWord:function(iK){if(!iK){return null;};return iK.replace(qx.bom.htmlarea.HtmlArea.CleanupWordsRegExp,fe);},getTextNodes:function(){return this._fetchTextNodes(this.getContentBody());},_fetchTextNodes:function(iN){var iM=[];var iL;if(iN.hasChildNodes){for(var i=0;i<iN.childNodes.length;i++ ){iL=this._fetchTextNodes(iN.childNodes[i]);qx.lang.Array.append(iM,iL);};};if(iN.nodeType==3){if(iN.nodeValue.length>1){iM.push(iN);};};return iM;},__wQ:0,__wR:function(){var iO=this._getIframeDocument();if(!iO){this.__wQ++ ;if(this.__wQ>5){this.error(gH+iO);this.fireDataEvent(fu);}else {{};qx.event.Timer.once(function(){this.__wR();},this,0);};}else {this.__wQ=0;this._onDocumentIsReady();};},_loaded:function(e){if(this.__wC){return;};if(this.__wB){this.__wS();return;};if((qx.core.Environment.get(ho)==go)){this.__wR();}else {this._onDocumentIsReady();};},isReady:function(){return this.__ea;},_onDocumentIsReady:function(){var iP=new qx.bom.htmlarea.manager.Command(this);if(this.getUseUndoRedo()){iP=new qx.bom.htmlarea.manager.UndoRedo(iP,this);};this.__wC=true;if((qx.core.Environment.get(ho)==go)){this.setEditable(true);};this.__wV();if(!(qx.core.Environment.get(ho)==N)){this.__wW();};if(!(qx.core.Environment.get(ho)==go)){this.setEditable(true);};this.__ea=true;this.__wv=iP;iP.setContentDocument(this._getIframeDocument());this.__xc();if((qx.core.Environment.get(ho)==N)){this.__wW();};this.fireEvent(fU);},forceEditable:qx.core.Environment.select(ho,{"gecko":function(){var iQ=this._getIframeDocument();if(iQ){if(parseFloat(qx.core.Environment.get(k))>=eH){iQ.designMode=fi;iQ.body.contentEditable=false;iQ.body.contentEditable=true;}else {iQ.body.contentEditable=true;this.__xd(true);};};},"default":(function(){})}),invalidateEditor:qx.core.Environment.select(ho,{"gecko":function(){this.__wC=false;this.__ea=false;this.__wB=true;},"default":function(){}}),__wS:qx.core.Environment.select(ho,{"gecko":function(){this.__wV();this.__wW();this.__wv.setContentDocument(this._getIframeDocument());this.setEditable(true);this.forceEditable();this.__wC=true;this.__ea=true;this.__wB=false;this.fireEvent(Y);},"default":function(){}}),__wT:function(iT){var iS=fe;if(!iT){return iS;};try{var iR=iT.getAttribute(ft);if(!iR){return iS;};if((qx.core.Environment.get(ho)==go)){iS=iR.cssText;}else {iS=iR;};}catch(iU){this.error(fB);};return iS;},__wU:function(iY){var iX=qx.core.Environment.get(ho)==gx?gb:fe;var iW=this.__wI[this.getContentType()];var iV=fJ+iW.meta+eA+iX+iW.style+iW.contentStyle+this.__wt+gR+fO;var content=iW.body+iY;return iW.html+iV+content+iW.footer;},__wV:function(){var jb=this.__wO(this.getValue());if(qx.lang.Type.isString(jb)){var ja=this._getIframeDocument();try{ja.open(eJ,true);ja.write(this.__wU(jb));ja.close();}catch(e){this.error(x+qx.bom.Iframe.queryCurrentUrl(this.__tb)+eB,e);this.fireDataEvent(fu,e);};};},__wW:function(){this.__wX();this.__xa();this.__wY();},__wX:function(){var jd=qx.event.Registration;var jc=this._getIframeDocument();jd.addListener(jc.body,gk,this._handleKeyPress,this);jd.addListener(jc.body,hs,this._handleKeyUp,this);jd.addListener(jc.body,fs,this._handleKeyDown,this);},__wY:function(){var jg=qx.event.Registration;var je=this._getIframeDocument();var jf=qx.core.Environment.get(ho)==fk?this._getIframeWindow():je.body;jg.addListener(jf,gV,this._handleFocusEvent,this);jg.addListener(jf,eq,this._handleBlurEvent,this);jg.addListener(je,fo,this._handleFocusOutEvent,this);},__xa:function(){var jj=qx.event.Registration;var ji=this._getIframeDocument();var jh=qx.core.Environment.get(ho)==go?hn:V;jj.addListener(ji.body,jh,this._handleMouseUpOnBody,this);jj.addListener(ji.documentElement,jh,this._handleMouseUpOnDocument,this);jj.addListener(ji.documentElement,ew,this._handleContextMenuEvent,this);},__xb:function(){if(this.__wF==null){this.__wF={execute:function(jk,jl){this.stackedCommands=true;this.commandStack.push({command:jk,value:jl});},commandStack:[],stackedCommands:false};};this.__wF.stackedCommands=false;return this.__wF;},__xc:function(){var jm=this.__wF;if(jm!=null&&jm.stackedCommands){var jn=jm.commandStack;if(jn!=null){for(var i=0,j=jn.length;i<j;i++ ){this.__wv.execute(jn[i].command,jn[i].value);};};};},__xd:function(jo){var jp=this._getIframeDocument();if(this.__wC&&jp){try{if((qx.core.Environment.get(ho)==gx)){jp.designMode=(jo!==false)?fY:u;};jp.designMode=(jo!==false)?u:fY;}catch(e){};};},setEditable:function(jr){if(this.__wC){this.__xd(true);if((qx.core.Environment.get(ho)==gx)){try{var jq=this._getIframeDocument();jq.execCommand(gT,false,true);}catch(js){try{var jq=this._getIframeDocument();jq.execCommand(et,false,false);}catch(jt){if(!this.__ea){this.error(m);this.fireDataEvent(fu,jt);}else {throw new Error(m);};};};};this.__wD=jr;};},getEditable:function(){return this.__wD;},isEditable:function(){return this.__wD;},__xe:false,_handleKeyUp:function(e){var ju=e.getKeyIdentifier().toLowerCase();this.__wG=e;{};if(qx.core.Environment.get(ho)==go||qx.core.Environment.get(ho)==fk){if(this.__xe){switch(ju){case W:if(this.getInsertLinebreakOnCtrlEnter()){if((qx.core.Environment.get(ho)==fk)){this.__xf();e.preventDefault();e.stopPropagation();}else {var jv=this.__xp(this.getSelection());if(jv){jv.collapse(true);jv.pasteHTML(eQ);};};this.__xk();};break;case hp:this.__xe=false;return;};};}else if((qx.core.Environment.get(ho)==gx)){switch(ju){case gf:case gW:case hx:case gm:case g:case gO:case eX:case n:case S:this.__wE=(this.getFocusNode()==this.getContentBody().firstChild);break;};};},__xf:function(){var jw=this.getSelection();var jx=fe;if(jw&&(jw.focusNode.textContent==fe||jw.focusNode.parentElement.tagName==he)){jx=o;};this.__wv.execute(fv,jx+qx.bom.htmlarea.HtmlArea.simpleLinebreak);},_handleKeyDown:qx.core.Environment.select(ho,{"mshtml|webkit":function(e){var jy=e.getKeyIdentifier().toLowerCase();{};if(this.__xe&&(jy==eL||jy==X||jy==eS||jy==gX||jy==K||jy==hr)){e.preventDefault();e.stopPropagation();};if(jy==hp){this.__xe=true;};},"default":function(e){}}),_handleKeyPress:function(e){var jD=this.getContentDocument();var jz=e.getKeyIdentifier().toLowerCase();var jB=e.isCtrlPressed();var jC=e.isShiftPressed();this.__wG=e;{};if(this.__wK){var jJ=!((qx.core.Environment.get(ho)==go)&&jz==W)||!((qx.core.Environment.get(ho)==gx)&&jz==W);if(jJ){this.__xk();this.__wK=false;};};switch(jz){case W:if(!jC&&!jB&&this.getMessengerMode()){e.preventDefault();e.stopPropagation();this.fireDataEvent(eE,this.getComputedValue());this.resetHtml();};if(jB){if(!this.getInsertLinebreakOnCtrlEnter()){return;};e.preventDefault();e.stopPropagation();if((qx.core.Environment.get(ho)==gx)){if(this.__xn()){this.insertHtml(hh);this.__xk();return;};this.insertHtml(ev);}else if((qx.core.Environment.get(ho)==N)){var jG=this.getSelection();var jE=this.__xp(jG);if(jG&&jE){var jF=jD.createElement(gL);jE.collapse(true);jE.insertNode(jF);jE.collapse(true);jE.selectNode(jF);jG.addRange(jE);jE.collapse(true);};};this.__xk();};if((qx.core.Environment.get(ho)==go)){if(!this.getInsertParagraphOnLinebreak()){if(this.__wv.execute(fv,qx.bom.htmlarea.HtmlArea.simpleLinebreak)){this.__xk();e.preventDefault();e.stopPropagation();};};}else if((qx.core.Environment.get(ho)==gx)){if(this.getInsertParagraphOnLinebreak()&&!jC&&!jB){var jG=this.getSelection();if(jG){var jI=jG.focusNode;if(this.__xn()){this.__xk();return;};if(this.__xo()){this.__xk();return;};while(!qx.dom.Node.isNodeName(jI,gF)){if(qx.dom.Node.isNodeName(jI,f)){this.__xk();return;};jI=jI.parentNode;};};this.__wv.insertParagraphOnLinebreak();e.preventDefault();e.stopPropagation();this.__xk();this.__wK=true;};}else if((qx.core.Environment.get(ho)==fk)){if(this.getInsertParagraphOnLinebreak()&&jC){this.__xf();e.preventDefault();e.stopPropagation();this.__xk();};};break;case hx:if(qx.core.Environment.get(ho)==gx&&qx.core.Environment.get(k)<1.9&&jC){var jG=this.getSelection();if(jG&&jG.focusNode==jD.body.firstChild){if(this.__wE){if(jG.focusOffset!=0){jG.extend(jG.focusNode,0);};};};};this.__xk();break;case fV:if(qx.core.Environment.get(ho)==gx&&qx.core.Environment.get(k)<1.9){if(jB){var jG=this.getSelection();if(jC){if(jG&&(jG.focusOffset!=0)||(jG.focusNode!=jD.body.firstChild)){jG.extend(jD.body.firstChild,0);};}else {var jA=null;var jH;if(jD){jA=jD.evaluate(ff,jD.body,null,XPathResult.ANY_TYPE,null);};if(jA&&jG){while(jH=jA.iterateNext()){if(jH&&jH.parentNode&&jH.parentNode.tagName!=hk){try{jG.extend(jH,0);if(!this.isSelectionCollapsed()){jG.collapseToStart();};}catch(jK){};break;};};};};};};this.__xk();break;case gf:case gW:case gm:case g:case gO:case eX:case n:case S:this.__xk();break;case eS:if(jB){this.__xg(O,true);};break;case K:case hr:if(jB){this.__xg(gU,true);};break;case gX:if(jB){this.__xg(M,true);};break;case eL:if(jB&&!jC){this.__xg(h,true);}else if(jB&&jC){this.__xg(fR,true);};break;case X:if(jB){this.__xg(fR,true);};break;case fW:if(jB){this.selectAll();};break;};this.__wG=null;},__xg:function(jL,jO){var jN=null;var jM=qx.bom.htmlarea.HtmlArea.hotkeyInfo;if(jM[jL]){jN=jM[jL].method;};if(jN!=null&&this[jN]){this[jN]();if(jO){this.__wG.preventDefault();this.__wG.stopPropagation();};if(this.isSelectionCollapsed()){this.__wK=true;};this.__xk();};},_handleFocusEvent:function(e){this.__wH=null;if(qx.core.Environment.get(ho)==gx||qx.core.Environment.get(ho)==fk){var jP=this.getContentDocument().getElementById(hj);if(jP){qx.bom.element.Attribute.reset(jP,fx);};};this.fireEvent(A);},_handleBlurEvent:function(e){this.__wu=this.getComputedValue();},_handleFocusOutEvent:function(e){this.__xe=false;if(this.__wH==null){this.__wH=this.getSelectedHtml();};this.fireEvent(gu);},_handleMouseUpOnBody:function(e){{};this.__wL=true;this.__xk();},_handleMouseUpOnDocument:qx.core.Environment.select(ho,{"mshtml":(function(){}),"default":function(e){if(!this.__wL){qx.bom.Element.activate(this.getContentBody());};this.__wL=false;}}),_handleContextMenuEvent:function(e){if(!this.getNativeContextMenu()){var jR=e.getViewportLeft();var jQ=e.getViewportTop();var jS=qx.bom.element.Location.getLeft(this.__lH)+jR;var jT=qx.bom.element.Location.getTop(this.__lH)+jQ;var jU={x:jS,y:jT,relX:jR,relY:jQ,target:e.getTarget()};e.preventDefault();e.stopPropagation();qx.event.Timer.once(function(){this.fireDataEvent(ew,jU);},this,0);};},isLoaded:function(){return this.__wC;},insertHtml:function(jV){return this.__wv.execute(fv,jV);},removeFormat:function(){var jW=this.__wv.execute(fS);this.__wv.execute(gB,this.getDefaultFontSize());this.__wv.execute(fb,this.getDefaultFontFamily());return jW;},setBold:function(){return this.__wv.execute(U);},setItalic:function(){return this.__wv.execute(gg);},setUnderline:function(){return this.__wv.execute(gM);},setStrikeThrough:function(){return this.__wv.execute(es);},setFontSize:function(jX){return this.__wv.execute(gB,jX);},setFontFamily:function(jY){return this.__wv.execute(fb,jY);},setTextColor:function(ka){return this.__wv.execute(w,ka);},setTextBackgroundColor:function(kb){return this.__wv.execute(q,kb);},setJustifyLeft:function(){return this.__wv.execute(gs);},setJustifyCenter:function(){return this.__wv.execute(ey);},setJustifyRight:function(){return this.__wv.execute(eM);},setJustifyFull:function(){return this.__wv.execute(hq);},insertIndent:function(){return this.__wv.execute(eG);},insertOutdent:function(){return this.__wv.execute(fc);},insertOrderedList:function(){return this.__wv.execute(gd);},insertUnorderedList:function(){return this.__wv.execute(eC);},insertHorizontalRuler:function(){return this.__wv.execute(fN);},insertImage:function(kc){return this.__wv.execute(fm,kc);},insertHyperLink:function(kd){return this.__wv.execute(hi,kd);},removeBackgroundColor:function(){return this.__wv.execute(l,eP);},setBackgroundColor:function(ke){return this.__wv.execute(l,ke);},removeBackgroundImage:function(){return this.__wv.execute(fD);},setBackgroundImage:function(kf,kh,kg){return this.__wv.execute(fD,[kf,kh,kg]);},selectAll:function(){return this.__wv.execute(eR);},undo:function(){if(this.getUseUndoRedo()){return this.__wv.execute(gD);}else {return true;};},redo:function(){if(this.getUseUndoRedo()){return this.__wv.execute(H);}else {return true;};},resetHtml:function(){var ki=this._getIframeDocument();while(ki.body.firstChild){ki.body.removeChild(ki.body.firstChild);};if(qx.core.Environment.get(ho)==gx){ki.body.innerHTML=fL;}else if(qx.core.Environment.get(ho)==fk){var kj=this.getSelection();var kk=ki.createRange();if(kk&&kj){kj.addRange(kk);};};},getHtml:function(kl){var km=this._getIframeDocument();if(km==null){return null;};return qx.bom.htmlarea.HtmlArea.__wy(km.body,false,kl,this.getPostProcess());},containsOnlyPlaceholder:qx.core.Environment.select(ho,{"mshtml":function(){var kn=this._getIframeDocument();return (kn.body.innerHTML==fF);},"default":(function(){return false;})}),_selectElement:function(kq){var kp=this.getContentWindow().getSelection();var ko=this.getContentDocument().createRange();ko.setStart(kq,0);kp.removeAllRanges();kp.addRange(ko);},focusContent:qx.core.Environment.select(ho,{"gecko":function(){var ks=this.getContentDocument();var kr=ks.getElementById(hj);this.getContentWindow().focus();qx.bom.Element.focus(this.getContentBody());if(kr){this._selectElement(kr);}else {this.__xh();};},"webkit":function(){qx.bom.Element.focus(this.getContentWindow());qx.bom.Element.focus(this.getContentBody());var kt=this.getContentDocument().getElementById(hj);if(kt){qx.bom.element.Attribute.reset(kt,fx);};this.__xh();},"opera":function(){qx.bom.Element.focus(this.getContentWindow());qx.bom.Element.focus(this.getContentBody());this.__xh();},"default":function(){qx.bom.Element.focus(this.getContentBody());this.__xh();}}),__xh:function(){if(!this.__xi()){this.__xj();};},__xi:qx.core.Environment.select(ho,{"gecko":function(){var ku=this.getContentBody().childNodes;if(ku.length==0){return false;}else if(ku.length==1){return !(ku[0]&&qx.dom.Node.isNodeName(ku[0],gL)&&qx.bom.element.Attribute.get(ku[0],eW)!=null);}else {return true;};},"webkit":function(){var kv=this.getContentBody().childNodes;if(kv.length==0){return false;}else if(kv.length==1){return !(kv[0]&&qx.dom.Node.isNodeName(kv[0],gL));}else {return true;};},"default":function(){var kw=this.getContentBody().childNodes;if(kw.length==0){return false;}else if(kw.length==1){return !(kw[0]&&qx.dom.Node.isNodeName(kw[0],hd)&&kw[0].firstChild==null);}else {return true;};}}),__xj:qx.core.Environment.select(ho,{"gecko|webkit":function(){this.getContentDocument().body.innerHTML=this.__wO(fe);var kx=this.getContentDocument().getElementById(hj);qx.bom.element.Attribute.reset(kx,fx);this._selectElement(kx);},"default":function(){var ky=qx.dom.Hierarchy.getFirstDescendant(this.getContentBody());if(qx.dom.Node.isNodeName(ky,hd)){qx.bom.element.Style.set(ky,hy,this.getDefaultFontFamily());qx.bom.element.Style.set(ky,er,this.getDefaultFontSize());};}}),getContextInformation:function(){return this.__xl();},__xk:function(){qx.event.Timer.once(function(e){var kz=this.__xl();this.fireDataEvent(T,kz);},this,200);},__xl:function(){if(this._processingExamineCursorContext||this.getEditable()==false){return null;};this._processingExamineCursorContext=true;if(!this.__xi()){this.__xj();};var kD=this.getFocusNode();if(kD==null){return null;};if(qx.dom.Node.isText(kD)){kD=kD.parentNode;};var kH=this._getIframeDocument();var kQ=(qx.core.Environment.get(ho)==go)?kD.currentStyle:kH.defaultView.getComputedStyle(kD,null);var kJ=false;var kA=false;var kF=false;var kE=false;var kI=false;var kP=false;var kG=false;var kR=false;var kC=false;var kM=false;var kN=null;var kO=null;var kK=null;if(kQ!=null){if((qx.core.Environment.get(ho)==go)){kA=kQ.fontStyle==gg;kF=kQ.textDecoration.indexOf(gM)!==-1;kE=kQ.textDecoration.indexOf(hw)!==-1;kN=kQ.fontSize;kK=kQ.fontFamily;kG=kQ.textAlign==gf;kR=kQ.textAlign==hb;kC=kQ.textAlign==gW;kM=kQ.textAlign==gG;}else {kA=kQ.getPropertyValue(gz)==gg;kF=kQ.getPropertyValue(gt).indexOf(gM)!==-1;kE=kQ.getPropertyValue(gt).indexOf(hw)!==-1;kN=kQ.getPropertyValue(er);kK=kQ.getPropertyValue(hy);kG=kQ.getPropertyValue(gN)==gf;kR=kQ.getPropertyValue(gN)==hb;kC=kQ.getPropertyValue(gN)==gW;kM=kQ.getPropertyValue(gN)==gG;};if(qx.core.Environment.get(ho)==go||qx.core.Environment.get(ho)==N){kJ=kQ.fontWeight==700;}else {kJ=kQ.getPropertyValue(hf)==U||qx.dom.Node.isNodeName(kD,eS);};};var kB=kD;if(kB!=null&&kB.parentNode!=null&&!qx.dom.Node.isDocument(kB.parentNode)){while(kB!=null&&!qx.dom.Node.isNodeName(kB,gF)){var kS=qx.dom.Node.getName(kB);if(kS==fg){kP=true;break;}else if(kS==Q){kI=true;break;};if(kO==null||kO==fe){kO=qx.bom.element.Attribute.get(kB,fE);};kB=kB.parentNode;};};var kL={bold:kJ?1:0,italic:kA?1:0,underline:kF?1:0,strikethrough:kE?1:0,fontSize:(kO==null)?kN:kO,fontFamily:kK,insertUnorderedList:kI?1:0,insertOrderedList:kP?1:0,justifyLeft:kG?1:0,justifyCenter:kR?1:0,justifyRight:kC?1:0,justifyFull:kM?1:0};this._processingExamineCursorContext=false;return kL;},getSelection:qx.core.Environment.select(ho,{"mshtml":function(){return this._getIframeDocument()?this._getIframeDocument().selection:null;},"default":function(){return this._getIframeWindow()?this._getIframeWindow().getSelection():null;}}),isSelectionCollapsed:qx.core.Environment.select(ho,{"mshtml":function(){return this.getSelection()&&this.getSelection().type==ep;},"default":function(){return this.getSelection()&&this.getSelection().isCollapsed;}}),getSelectedText:qx.core.Environment.select(ho,{"mshtml":function(){return this.getRange()?this.getRange().text:fe;},"default":function(){return this.getRange()?this.getRange().toString():fe;}}),getSelectedHtml:function(){if(this.__wH!=null){return this.__wH;};var kT=this.getRange();if(!kT){return fe;}else {return this.__xm(kT);};},__xm:qx.core.Environment.select(ho,{"mshtml":function(kU){if(!kU){return fe;};return kU.item?kU.item(0).outerHTML:kU.htmlText;},"default":function(kW){var kV=this._getIframeDocument();if(kV&&kW){try{var kX=kV.createElement(gF);kX.appendChild(kW.cloneContents());return kX.innerHTML;}catch(kY){};return kW+fe;};return fe;}}),clearSelection:qx.core.Environment.select(ho,{"mshtml":function(){var la=this.getSelection();if(la){la.empty();};},"default":function(){var lb=this.getSelection();if(lb){lb.collapseToStart();};}}),__xn:qx.core.Environment.select(ho,{"gecko":function(){var lc=this.getSelection();var ld=this.getFocusNode();return lc&&this.isSelectionCollapsed()&&ld!=null&&qx.dom.Node.isText(ld)&&lc.anchorOffset<ld.length;},"default":function(){return false;}}),__xo:qx.core.Environment.select(ho,{"gecko":function(){return qx.dom.Node.isElement(this.getFocusNode());},"default":function(){return false;}}),getRange:function(){return this.__xp(this.getSelection());},__xp:qx.core.Environment.select(ho,{"mshtml":function(lf){var le=this._getIframeDocument();if(lf){try{return lf.createRange();}catch(lg){return le?le.body.createTextRange():null;};}else {return le?le.body.createTextRange():null;};},"default":function(li){var lh=this._getIframeDocument();if(li){try{return li.getRangeAt(0);}catch(lj){return lh?lh.createRange():null;};}else {return lh?lh.createRange():null;};}}),saveRange:qx.core.Environment.select(ho,{"mshtml":function(){this.__wJ=this.getRange();},"default":function(){}}),getSavedRange:qx.core.Environment.select(ho,{"mshtml":function(){return this.__wJ;},"default":function(){}}),resetSavedRange:qx.core.Environment.select(ho,{"mshtml":function(){this.__wJ=null;},"default":function(){}}),getFocusNode:qx.core.Environment.select(ho,{"mshtml":function(){var lk=this.getSelection();var ll;switch(lk.type){case eD:case ep:ll=this.__xp(lk);if(ll){ll.collapse(false);return ll.parentElement();}else {return null;};break;case gP:ll=this.__xp(lk);if(ll){try{ll.collapse(false);}catch(lm){};return ll.item(0);}else {return null;};break;default:return this._getIframeDocument().body;};},"default":function(){var ln=this.getSelection();if(ln&&ln.focusNode){return ln.focusNode;};return this._getIframeDocument().body;}})},environment:{"qx.bom.htmlarea.HtmlArea.debug":false},destruct:function(){try{var lp=this._getIframeDocument();var lr=qx.event.Registration;lr.removeListener(lp.body,gk,this._handleKeyPress,this);lr.removeListener(lp.body,hs,this._handleKeyUp,this);lr.removeListener(lp.body,fs,this._handleKeyDown,this);var lq=qx.core.Environment.get(ho)==fk?this._getIframeWindow():lp.body;lr.removeListener(lq,gV,this._handleFocusEvent);lr.removeListener(lq,eq,this._handleBlurEvent);lr.removeListener(lp,fo,this._handleFocusOutEvent);var lo=qx.core.Environment.get(ho)==go?hn:V;lr.removeListener(lp.body,lo,this._handleMouseUpOnBody,this);lr.removeListener(lp.documentElement,lo,this._handleMouseUpOnDocument,this);lr.removeListener(lp.documentElement,ew,this._handleContextMenuEvent,this);if((qx.core.Environment.get(ho)==go)){qx.bom.Iframe.setSource(this.__tb,ge);};}catch(ls){};if(this.__wv instanceof qx.core.Object){this._disposeObjects(hv);}else {this.__wv=null;};this.__wI=this.__tb=this.__lH=this.__wF=null;}});})();(function(){var a="backgroundColor",b="_moz",c="top",d="/>",f="formatBlock",g="__ya",h="__xU",m="insertParagraph",n="li",o='<span style="',p="<img ",q="no-repeat",r="</font>",s=' <a href="',t="FONT",u="backgroundPosition",v="|top|bottom|center|left|right|right top|left top|left bottom|right bottom|",w="__placeholder__",x="JustifyCenter",y="transparent",z="<p style='",A="__xV",B="outdent",C='</a> ',D="InsertImage",E=';',F="font-size",G="__resetHtml",H="FontName",I="p",J="bold",K="blockquote",L="underline",M="inserthtml",N="span",O='|',P="id",Q="style",R="__xH",S="The method '",T="qx.bom.htmlarea.manager.Command",U="__xW",V="'><br class='webkit-block-placeholder' />",W="string",X="a",Y='"',dr="<span></span>",ds="__xG",dt="href",dm="background-color",dn="backgroundRepeat",dp="type",dq="font",dx="CreateLink",dy=":",dz="InsertHtml",dA="__yg",du="':'",dv="='",dl="italic",dw='">',dE="' you calling to execute the command '",eh="font-family",fn="mshtml",dF="qx_link",dB="none",dC='"></span>',fj="Italic",dD="fontStyle",dG=" ",dH=";",dI="__xX",dN="InsertUnorderedList",dO="body",dP="__yf",dJ="OL",dK='text-align:',dL="Bold",dM="ForeColor",dU="child",dV="px",dW="url(",dX='" ',dQ="repeat repeat-x repeat-y no-repeat",dR='</p>',dS="gecko",dT="<hr />",ec="__xJ",ed="legacy-font-size",fl="backgroundImage",ee="editor not ready! '",dY='<font style="',ea="text-align",fk="Command ",eb="Control",ef='color',eg="IMG",es="__ye",er="__xY",eq="__paragraph__",ew='<p id="',ev="StrikeThrough",eu='text-decoration',et="LI",el="__getHtml",ek='>',ej="BackColor",ei='font-family:',ep='" size="',eo="Indent",en=':',em="HiliteColor",eE="br",eD="fontWeight",eC="Copy",eB="</span>",eI="engine.name",eH="Paste",eG="color",eF="RemoveFormat",eA="text-decoration",ez="JustifyRight",ey="size",eT="__xL",eS="FontSize",eR="' ",eX='',eW="webkit",eV='style="',eU="__yd",eM="'",eL="' is not available!",eK="_moz_dirty",eJ="__xC",eQ="JustifyLeft",eP="textDecoration",eO=" is currently not supported!",eN="Underline",fe="SelectAll",fd="Cut",fc="line-through",fb="BODY",fi=")",fh="__yb",fg="",ff="__xM",fa='<span id="',eY="UL",dk="JustifyFull",dj="Outdent",fm="indent",dh="selectall",di="InsertOrderedList",dg="undefined";qx.Class.define(T,{extend:qx.core.Object,construct:function(fo){qx.core.Object.call(this);this.__xq=fo;this.__sN=null;this._commands=null;this.__xx();this.__xr={"Bold":true,"Italic":true,"Underline":true,"StrikeThrough":true};this.__xs=[10,12,16,18,24,32,48];this.__xt=0;},statics:{__xu:v,__xv:dQ},members:{__sN:null,__xq:null,__xw:false,__xr:null,__xs:null,__xt:null,setContentDocument:function(fp){this.__sN=fp;},getCommandObject:function(fq){if(this._commands[fq]){return this._commands[fq];}else {return null;};},__xx:function(){this._commands={bold:{useBuiltin:false,identifier:dL,method:eU},italic:{useBuiltin:false,identifier:fj,method:es},underline:{useBuiltin:false,identifier:eN,method:dP},strikethrough:{useBuiltin:false,identifier:ev,method:dA},fontfamily:{useBuiltin:true,identifier:H,method:null},fontsize:{useBuiltin:false,identifier:eS,method:h},textcolor:{useBuiltin:true,identifier:dM,method:null},textbackgroundcolor:{useBuiltin:false,identifier:null,method:A},backgroundcolor:{useBuiltin:false,identifier:null,method:U},backgroundimage:{useBuiltin:false,identifier:null,method:dI},justifyleft:{useBuiltin:false,identifier:eQ,method:ds},justifyright:{useBuiltin:false,identifier:ez,method:ds},justifycenter:{useBuiltin:false,identifier:x,method:ds},justifyfull:{useBuiltin:false,identifier:dk,method:ds},indent:{useBuiltin:true,identifier:eo,method:null},outdent:{useBuiltin:true,identifier:dj,method:null},copy:{useBuiltin:true,identifier:eC,method:null},cut:{useBuiltin:true,identifier:fd,method:null},paste:{useBuiltin:true,identifier:eH,method:null},insertorderedlist:{useBuiltin:false,identifier:di,method:R},insertunorderedlist:{useBuiltin:false,identifier:dN,method:R},inserthorizontalrule:{useBuiltin:false,identifier:dz,method:ff},insertimage:{useBuiltin:false,identifier:D,method:ec},inserthyperlink:{useBuiltin:false,identifier:dx,method:eT},selectall:{useBuiltin:false,identifier:fe,method:er},selectedtext:{useBuiltin:false,identifier:null,method:g},selectedhtml:{useBuiltin:false,identifier:null,method:fh},inserthtml:{useBuiltin:false,identifier:dz,method:eJ},resethtml:{useBuiltin:false,identifier:null,method:G},gethtml:{useBuiltin:false,identifier:null,method:el},removeformat:{useBuiltin:true,identifier:eF,method:null}};},execute:function(fr,ft){if(!this.__xq.isReady()){this.error(ee+fr+du+ft+eM);return false;};fr=fr.toLowerCase();ft=ft!=null?ft:null;if(this._commands[fr]){var fs;var fu=this._commands[fr];if(!((qx.core.Environment.get(eI)==eW)&&(fr==fm||fr==B))){if(this.__xy()){this.__xz();};};if(fu.useBuiltin){fs=this.__xA(fu.identifier,false,ft);}else {if(fu.method!=null&&this[fu.method]){fs=this[fu.method].call(this,ft,fu);}else {this.error(S+fu.method+dE+fr+eL);};};this.__xq.resetSavedRange();return fs;}else {this.error(fk+fr+eO);};},__xy:function(){var Node=qx.dom.Node;var fv=this.__xq.getFocusNode();var fy=false;var fw=false;if(fv){if(Node.isText(fv)){var fx=qx.dom.Hierarchy.getAncestors(fv);for(var i=0,j=fx.length;i<j;i++ ){if(Node.isNodeName(fx[i],I)||qx.bom.htmlarea.HtmlArea.isHeadlineNode(fx[i])){fy=true;break;};};}else if(Node.isNodeName(fv,dO)){fw=true;};};return fw||!fy;},__xz:function(){this.__xA(f,false,I);},__xA:function(fF,fD,fB){try{var fA=this.__sN;var fz=false;var fC=this.__xq.getRange();this.__sN.body.focus();if((qx.core.Environment.get(eI)==fn)){if(fF!=dh){fC.select();if(((fC.text)&&(fC.text.length>0))||((fC.length==1)&&(fC.item(0))&&(fC.item(0).tagName==eg))){fA=fC;}else {fA=this.__sN;};};if(((qx.core.Environment.get(eI)==fn))&&(this.__xr[fF])){if(fC.text==fg){fz=true;};};};var fE=fA.execCommand(fF,fD,fB);if(fz&&fC.text!=fg){fC.collapse();};{};this.__xw=false;}catch(fG){{};return false;};return fE;},__xB:qx.core.Environment.select(eI,{"mshtml":function(){var fI=this.__xq;var fH=fI.getSavedRange()!=null?fI.getSavedRange():fI.getRange();return fH;},"default":function(){return this.__xq.getRange();}}),__xC:qx.core.Environment.select(eI,{"mshtml":function(fM,fN){var fL;if(fM==qx.bom.htmlarea.HtmlArea.simpleLinebreak){return this.__xF();}else {this.__sN.body.focus();var fK=this.__xq.getSelection();var fJ=this.__xB();if(fJ&&fK&&fK.type!=eb){try{fJ.pasteHTML(fM);fJ.collapse(false);fJ.select();fL=true;}catch(e){};}else {fL=false;};this.__xq.resetSavedRange();return fL;};},"default":function(fO,fP){this.__sN.body.focus();return this.__sN.execCommand(fP.identifier,false,fO);}}),insertParagraphOnLinebreak:qx.core.Environment.select(eI,{"gecko":function(){var fX=this.__xP();var gc=this.__xD(fX);var fT=this.__xN(fX);var fY=w+Date.parse(new Date());var ga=eq+Date.parse(new Date());var fR=eX;var fV=fa+fY+dC;fR+=fV;fR+=ew+ga+dX+gc+ek;fR+=fT+dR;this.__xq.getCommandManager().addUndoStep(M,m,this.getCommandObject(M));this.execute(M,fR);this.__xE();qx.bom.element.Attribute.reset(this.__sN.getElementById(fY),P);var fW=this.__sN.getElementById(ga);if(fW.previousSibling.innerHTML==fV){var fQ=this.__xO();var fU=this.__sN.createElement(eE);var fS=this.__sN.createAttribute(eK);fS.nodeValue=fg;fU.setAttributeNode(fS);var gb=this.__sN.createAttribute(dp);gb.nodeValue=b;fU.setAttributeNode(gb);fW.previousSibling.appendChild(fQ);fW.previousSibling.appendChild(fU);};qx.bom.element.Attribute.reset(fW,P);return true;},"webkit":function(){var gd=this.getCurrentStyles();var ge=fg;var gg={"background-color":true,"text-align":true};for(var gf in gd){if(gg[gf]){ge+=gf+dy+gd[gf]+dH;};};this.__xq.insertHtml(z+ge+V);},"default":(function(){})}),__xD:qx.core.Environment.select(eI,{"gecko":function(gk){var gm=eV;var gh=gk.child;if(gh[ea]){gm+=dK+gh[ea]+E;delete gk.child[ea];};if(gh[eh]){gm+=ei+gh[eh]+E;delete gk.child[eh];};var gl={"padding-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true};var gj={"margin-top":true,"margin-bottom":true,"margin-left":true,"margin-right":true};for(var gi in gh){if(gl[gi]||gj[gi]){gm+=gi+en+gh[gi]+E;delete gk.child[gi];};};gm+=Y;return gm;},"default":function(){return fg;}}),__xE:qx.core.Environment.select(eI,{"gecko":function(){var gu=this.__xq.getSelection();if(!gu||!gu.focusNode){return;};var gn=gu.focusNode;var gs=gu.focusNode;while(!qx.dom.Node.isNodeName(gs,I)){gs=gs.parentNode;};var gr=gs.previousSibling.id;var gv=gs.nextSibling?gs.nextSibling.id:null;if(qx.lang.String.startsWith(gr,eq)&&gr==gv){var gt=gs.nextSibling;var gp=this.__xq.getRange();gp.selectNode(gt);gu.addRange(gp);var go=qx.bom.htmlarea.HtmlArea.EMPTY_DIV;this.__xq.getCommandManager().addUndoStep(M,go,this.getCommandObject(M));this.execute(M,go);var gq=this.__xq.getRange();if(gn){while(gn&&gn.firstChild&&qx.dom.Node.isElement(gn.firstChild)){gn=gn.firstChild;};};gq.selectNode(gn);gu.addRange(gq);gq.collapse(true);};},"default":(function(){})}),__xF:qx.core.Environment.select(eI,{"mshtml":function(){var gw=this.__xq.getRange();if(gw&&!qx.dom.Node.isNodeName(gw.parentElement(),n)){gw.pasteHTML(qx.bom.htmlarea.HtmlArea.simpleLinebreak);gw.collapse(false);gw.select();return true;};return false;},"default":function(){return false;}}),__xG:function(gy,gz){var gx=(qx.core.Environment.get(eI)==fn)?this.__xq.getRange():this.__sN;return gx.execCommand(gz.identifier,false,gy);},__xH:function(gC,gD){if((qx.core.Environment.get(eI)==fn)){var gB=this.__xq.getFocusNode();this.__xI(gB);};this.__sN.body.focus();var gA=this.__sN.execCommand(gD.identifier,false,gC);if((qx.core.Environment.get(eI)==eW)){var gB=this.__xq.getFocusNode();this.__xI(gB.parentNode);};return gA;},__xI:function(gE){var gF=[];var parent=gE.parentNode;while(qx.dom.Node.isNodeName(parent,K)){gF.push(parent);parent=parent.parentNode;};if(gF.length>0){parent.appendChild(gE);parent.removeChild(gF[gF.length-1]);};},__xJ:qx.core.Environment.select(eI,{"gecko":function(gV,gP){if(gV.src){this.__sN.execCommand(gP.identifier,false,gV.src);delete gV.src;var gI=this.__xq.getSelection();if(gI){var gH=gI.anchorNode;var gQ=gI.anchorOffset;var gJ=gH.childNodes[gQ-1];var gS;for(var gL in gV){gS=this.__sN.createAttribute(gL);gS.nodeValue=gV[gL];gJ.setAttributeNode(gS);};var gK={"font":true,"span":true};var gG=null;var gO=true;if(qx.dom.Node.isElement(gJ.previousSibling)&&gK[qx.dom.Node.getName(gJ.previousSibling)]){gG=gJ.previousSibling;}else if(gK[qx.dom.Node.getName(gJ.parentNode)]){gG=gJ.parentNode;gO=false;};var gT=this.__sN.createDocumentFragment();var gU;if(gO&&gG!=null){var gK=this.__xK(gG);gT.appendChild(gK.root);gU=gK.inline;}else {gU=this.__sN.createElement(N);gT.appendChild(gU);};var gR=this.__sN.createTextNode(fg);gU.appendChild(gR);var gN=gJ.parentNode;if(gJ==gN.lastChild){gN.appendChild(gT);}else {gN.insertBefore(gT,gJ.nextSibling);};var gM=this.__xq.getRange();gM.selectNodeContents(gU);};return true;}else {return false;};},"mshtml":function(hb,gX){var ha=false;var gW=p;for(var gY in hb){gW+=gY+dv+hb[gY]+eR;};gW+=d;var hc=this.__xq.getSelection();var hd=this.__xB();if(hc&&hc.type!=eb){try{hd.select();hd.pasteHTML(gW);ha=true;}catch(e){};};this.__xq.resetSavedRange();return ha;},"default":function(hf,hh){if(hf.src){var hg=p;for(var he in hf){hg+=he+dv+hf[he]+eR;};hg+=d;return this.__sN.execCommand(dz,false,hg);}else {return false;};}}),__xK:function(hj){while(hj.firstChild&&hj.firstChild.nodeType==1){hj=hj.firstChild;};var hm=this.__xP(hj);var hq,hk,ho;var hi=fg;var parent=null;var hp=null;var hn=hm.child;while(hn){hp=this.__sN.createElement(hn[ed]?dq:N);hk=this.__sN.createAttribute(Q);hp.setAttributeNode(hk);for(var hl in hn){if(hl!=dU&&hl!=ed){hi+=hl+dy+hn[hl]+dH;}else if(hl==ed){ho=this.__sN.createAttribute(ey);ho.nodeValue=hn[hl];hp.setAttributeNode(ho);};};hk.nodeValue=hi;if(parent!=null){parent.appendChild(hp);}else {hq=hp;};parent=hp;hn=hn.child;hi=fg;};return {root:hq,inline:hp};},__xL:qx.core.Environment.select(eI,{"gecko|opera":function(hr,hv){var hy=this.__xq.getSelection();var ht=this.__xq.getRange();if(hy.isCollapsed){var hs=dF+( ++this.__xt);var hz=this.__sN.createElement(X);var hu=this.__sN.createAttribute(dt);var hw=this.__sN.createAttribute(P);var hx=this.__sN.createTextNode(hr);hw.nodeValue=hs;hz.setAttributeNode(hw);hu.nodeValue=hr;hz.setAttributeNode(hu);hz.appendChild(hx);ht.insertNode(hz);ht.selectNode(hz);hy.collapseToEnd();return true;}else {return this.__sN.execCommand(hv.identifier,false,hr);};},"mshtml":function(hA,hE){try{var hD;var hB=this.__xB();var hC=this.__xq;var hB=hC.getSavedRange()!=null?hC.getSavedRange():hC.getRange();if(hB!=null&&hB.text!=fg){hD=hB.execCommand(hE.identifier,false,hA);}else {hD=this.__xC(s+hA+dw+hA+C,hE);};this.__xq.resetSavedRange();return hD;}catch(e){{};return false;};},"default":function(hF,hG){return this.__sN.execCommand(hG.identifier,false,hF);}}),__xM:function(hI,hJ){var hH=dT;if((qx.core.Environment.get(eI)==dS)){hH+=this.__xN();};return this.__xC(hH,hJ);},__xN:function(hL){var hO=fg;var hN=o;var hM=[];var hR=typeof hL!==dg?hL:this.__xP();var hP=hR.child;var hQ=false;if(qx.lang.Object.isEmpty(hP)){return fg;};while(hP){hQ=hP[ed]!=null;hO+=hQ?dY:hN;for(var hK in hP){hO+=(hK!=dU&&hK!=ed)?hK+en+hP[hK]+E:fg;};hO+=hQ?ep+hP[ed]+dw:dw;hM.unshift(hQ?r:eB);hP=hP.child;};if(hM.length==1&&hM[0]==r){hO+=dr;};for(var i=0,j=hM.length;i<j;i++ ){hO+=hM[i];};return hO;},__xO:function(){var hT=this.__sN.createDocumentFragment();var hY=this.__xP();var parent=hT;var hW=hY.child;var hU;var hX=false;while(hW){hX=hW[ed]!=null;hU=this.__sN.createElement(hX?dq:N);parent.appendChild(hU);for(var hS in hW){if(hS!=dU&&hS!=ed){qx.bom.element.Style.set(hU,hS,hW[hS]);};};if(hX){var hV=this.__sN.createAttribute(ey);hV.nodeValue=hW[ed];hU.setAttributeNode(hV);};parent=hU;hW=hW.child;};return hT;},__xP:function(ib){var ic={};var id=null;var ie=this.getCurrentStyles(ib);id=ic.child={};for(var ia in ie){if(ia!=eA){id[ia]=ie[ia];};};if(ie[eA]){var ig=ie[eA];for(var i=0,j=ig.length;i<j;i++ ){if(id==null){id=ic.child={};}else {id=id.child={};};id[ef]=ig[i][ef];id[eu]=ig[i][eu];};};if(ie[ef]&&ie[eu]){id=id.child={};id[ef]=ie[ef];};return ic;},getCurrentStyles:function(ij){if(ij==null){var im=this.__xq.getSelection();if(!im||im.focusNode==null){return {};};ij=(im.focusNode.nodeType==3)?im.focusNode.parentNode:im.focusNode;};var ik=qx.dom.Hierarchy.getAncestors(ij);var ih=qx.lang.Array.insertBefore(ik,ij,ik[0]);var il=this.__xQ(ih);var ii=this.__xR(il,ih);return ii;},__xQ:function(ir){var iq={};var io,ip;for(var i=0,j=ir.length;i<j;i++ ){ip=ir[i];for(var k=0,l=ip.style.length;k<l;k++ ){io=ip.style[k];if(io.length>0&&typeof iq[io]===dg){iq[io]=ip.style.getPropertyValue(io);};};if(ip.tagName.toUpperCase()==t&&ip.size&&iq[ed]===undefined){iq[ed]=ip.size;};};if(iq[ed]&&iq[F]){delete iq[F];};return iq;},__xR:function(ix,it){var iv=it[0];var iw=this.__xq.getContentWindow().getComputedStyle(iv,null);var iy;var iu={};for(var is in ix){if(is!=ed){iy=iw.getPropertyValue(is);}else {iy=ix[is];};if(is==dm&&iy==y){iu[is]=this.__xT(it);}else if(is==eA){iu[is]=this.__xS(it);}else {iu[is]=iy;};};return iu;},__xS:function(iB){var iC,iE,iz;var iD=[];var iA=this.__xq.getContentWindow();for(var i=0,j=iB.length;i<j;i++ ){iz=iA.getComputedStyle(iB[i],null);iC=iz.getPropertyValue(eA);iE=iz.getPropertyValue(eG);if(iC!=dB){iD.push({'text-decoration':iC,'color':iE});};};return iD;},__xT:function(iG){var iH,iF,iI;for(var i=0;i<iG.length;i++ ){iH=iG[i];iF=this.__xq.getContentWindow().getComputedStyle(iH,null);iI=iF.getPropertyValue(dm);if(iI!=y){return iI;};};},__xU:function(iP,iQ){var iK=this.__xq.getSelection();var iO=((qx.core.Environment.get(eI)==fn))?this.__xq.getRange():iO=iK.getRangeAt(0);var iS=[];var iW;var iN=[dJ,eY];var iJ,i,j,iU;iU=((qx.core.Environment.get(eI)==fn))?iO.parentElement():iO.commonAncestorContainer;if(iU.tagName==fb){for(var i=0;i<iN.length;i++ ){iJ=iU.getElementsByTagName(iN[i]);for(var j=0;j<iJ.length;j++ ){if(iJ[j]){iS.push(iJ[j]);};};};}else if(qx.lang.Array.contains(iN,iU.tagName)){iS.push(iU);};if(iS.length>0){for(var i=0;i<iS.length;i++ ){var iV=iS[i];iW=((qx.core.Environment.get(eI)==fn))?((iV==iU)||(iU.tagName==fb)):iK.containsNode(iV,false);for(j=0;j<iV.childNodes.length;j++ ){var iM=iV.childNodes[j];if(iW||(iK.focusNode.nodeValue&&qx.dom.Hierarchy.contains(iM,iK.focusNode)&&(iK.focusOffset==iK.focusNode.nodeValue.length))||(qx.dom.Hierarchy.contains(iM,iK.anchorNode)&&(iK.anchorOffset==0))||(iK.containsNode(iM,false))){iM.style.fontSize=(this.__xs[iP]||iP)+dV;};};};}else {var iL=((qx.core.Environment.get(eI)==fn))?iU:iK.focusNode;var iR=qx.dom.Hierarchy.getAncestors(iL);for(i=0;i<iR.length;i++ ){if(iR[i].tagName==et){if((((qx.core.Environment.get(eI)==dS))&&((iK.anchorOffset==0)&&(iK.focusNode.nodeValue&&(iK.focusOffset==iK.focusNode.nodeValue.length))&&qx.dom.Hierarchy.contains(iR[i].firstChild,iK.anchorNode)&&qx.dom.Hierarchy.contains(iR[i].lastChild,iK.focusNode)))||(((qx.core.Environment.get(eI)==fn))&&(iO.htmlText==iR[i].innerHTML))){iR[i].style.fontSize=(this.__xs[iP]||iP)+dV;};break;};};};if((qx.core.Environment.get(eI)==fn)){this.__sN.body.focus();this.__xq.getRange().select();return this.__sN.execCommand(eS,false,iP);}else if((qx.core.Environment.get(eI)==dS)){var parent=iO.commonAncestorContainer;if(parent.nodeType===1){var iT=parent.getElementsByTagName(N);for(i=0;i<iT.length;i++ ){if(iT[i].style.fontSize){iT[i].style.fontSize=null;};};};};return this.__sN.execCommand(eS,false,iP);},__xV:qx.core.Environment.select(eI,{"mshtml":function(iX,iY){this.__sN.body.focus();return this.__sN.execCommand(ej,false,iX);},"gecko|opera":function(ja,jb){this.__sN.body.focus();return this.__sN.execCommand(em,false,ja);},"webkit":function(je,jf){var jg=this.__xq.getSelection();var jd=this.__xq.getRange();if(!jg||!jg.isCollapsed){this.__sN.body.focus();this.__sN.execCommand(ej,false,je);if(jg){jg.collapseToEnd();};return true;}else {var jc=jg.anchorOffset;var ji=jg.anchorOffset;var jd=jg.getRangeAt(0);var jh=jg.anchorNode;while(ji>0){if(jh.nodeValue.charCodeAt(ji)==160||jh.nodeValue.charCodeAt(ji)==32){break;}else {ji-- ;};};while(jc<jh.nodeValue.length){if(jh.nodeValue.charCodeAt(jc)==160||jh.nodeValue.charCodeAt(jc)==32){break;}else {jc++ ;};};jd.setStart(jg.anchorNode,jg.anchorNode.nodeValue.charAt(ji)==dG?ji+1:ji);jd.setEnd(jg.anchorNode,jc);jg.addRange(jd);this.__sN.body.focus();this.__sN.execCommand(ej,false,je);jg.collapseToEnd();return true;};}}),__xW:function(jj,jk){jj=jj!=null&&typeof jj==W?jj:y;qx.bom.element.Style.set(this.__sN.body,a,jj);return true;},__xX:function(jn,jo){var jm,jl,jq;var jp=qx.bom.htmlarea.manager.Command;if(jn==null){jm=null;}else {jm=jn[0];jl=jn[1];jq=jn[2];};if(jm==null||typeof jm!=W){qx.bom.element.Style.set(this.__sN.body,fl,fg);qx.bom.element.Style.set(this.__sN.body,dn,fg);qx.bom.element.Style.set(this.__sN.body,u,fg);return true;}else {if(jm.search(/^url.*\(/)==-1){jm=dW+jm+fi;};};if(jl!=null&&!qx.lang.String.contains(jp.__xv,jl)){{};return false;}else {jl=q;};if(jq!=null){if(qx.lang.Type.isString(jq)&&!qx.lang.String.contains(jp.__xu,O+jq+O)){{};return false;}else {if(qx.lang.Type.isArray(jq)&&jq.length==2){jq=jq[0]+dG+jq[1];}else {{};return false;};};}else {jq=c;};qx.bom.element.Style.set(this.__sN.body,fl,jm);qx.bom.element.Style.set(this.__sN.body,dn,jl);qx.bom.element.Style.set(this.__sN.body,u,jq);return true;},__xY:qx.core.Environment.select(eI,{"mshtml":function(js,jt){var jr=this.__sN.body.createTextRange();jr.select();return true;},"default":function(ju,jv){return this.__xA(jv.identifier,false,ju);}}),__ya:function(){return this.__xq.getSelectedText();},__yb:function(){return this.__xq.getSelectedHtml();},__yc:function(jz,jA){var jy=this.__xq.getFocusNode();if(jy.textContent==fg){var jx=qx.dom.Hierarchy.getAncestors(jy);jx.unshift(jy);var Node=qx.dom.Node;var jw=qx.bom.element.Style;var jB=jx.shift();while(jx.length>0){if(Node.getName(jB)==I||Node.getName(jB)==dO){break;};if(jw.get(jB,jz,jw.LOCAL_MODE)==jA){jw.reset(jB,jz);return true;};jB=jx.shift();};};return false;},__yd:qx.core.Environment.select(eI,{"gecko":function(jC,jD){if(this.__yc(eD,J)){return true;}else {return this.__xA(jD.identifier,false,jC);};},"default":function(jE,jF){return this.__xA(jF.identifier,false,jE);}}),__ye:qx.core.Environment.select(eI,{"gecko":function(jG,jH){if(this.__yc(dD,dl)){return true;}else {return this.__xA(jH.identifier,false,jG);};},"default":function(jI,jJ){return this.__xA(jJ.identifier,false,jI);}}),__yf:qx.core.Environment.select(eI,{"gecko":function(jK,jL){if(this.__yc(eP,L)){return true;}else {return this.__xA(jL.identifier,false,jK);};},"default":function(jM,jN){return this.__xA(jN.identifier,false,jM);}}),__yg:qx.core.Environment.select(eI,{"gecko":function(jO,jP){if(this.__yc(eP,fc)){return true;}else {return this.__xA(jP.identifier,false,jO);};},"default":function(jQ,jR){return this.__xA(jR.identifier,false,jQ);}})},destruct:function(){this.__sN=this.__xq=this._commands=null;this.__xr=this.__xs=null;}});})();(function(){var a="undo",b="__wv",c="backgroundColor",d="actionType ",f="mousedown",g="pageup",h="b",k="backgroundimage",l="control",m="shift",n="end",o="right",p="qx_link",q="insertunorderedlist",r="Command",s="Undo",t="pagedown",u="k",v="Content",w="home",x=" is not managed! Please provide a handler method!",y="table",z="backgroundImage",A="backgroundRepeat",B="p",C="a",D="insertorderedlist",E="y",F="backgroundPosition",G="justifyright",H="redo",I="insertParagraph",J="qx.bom.htmlarea.manager.UndoRedo",K="left",L="i",M="backgroundcolor",N="td",O="img",P="Internal",Q="u",R="inserthyperlink",S="gecko",T="enter",U="mshtml",V="engine.name",W="mouseup",X="keypress",Y="Redo",bn="webkit",bo="insertimage",bp="inserthtml",bj="z",bk="Custom",bl="undoRedoState",bm="down",bq="up",br="body";qx.Class.define(J,{extend:qx.core.Object,construct:function(bt,bs){qx.core.Object.call(this);this.__wv=bt;this.__xq=bs;this.__yh=[];this.__yi=[];this._commands=null;this.__sN=null;this.__yj={};this.__yk={command:true,content:true,custom:true};this.__xx();this.__yl=qx.lang.Function.bind(this._handleKeyPress,this);this.__ym=qx.lang.Function.bind(this._handleMouseUp,this);if((qx.core.Environment.get(V)==U)){this.__yn=qx.lang.Function.bind(this._handleMouseDown,this);};},members:{__yo:false,__yp:false,__yq:false,__yk:null,__yj:null,__wv:null,__sN:null,__yh:null,__yi:null,__xq:null,__yl:null,__ym:null,__yn:null,__yr:null,setContentDocument:function(bu){this.__sN=bu;this.__wv.setContentDocument(bu);qx.event.Registration.addListener(bu.body,X,this.__yl,this);qx.event.Registration.addListener(bu.body,W,this.__ym,this);if((qx.core.Environment.get(V)==U)){qx.event.Registration.addListener(bu.body,f,this.__yn,this,true);};},insertParagraphOnLinebreak:function(){return this.__wv.insertParagraphOnLinebreak();},execute:function(bv,bx){var bw;bv=bv.toLowerCase();if(this._commands[bv]){if(this._commands[bv].passthrough){bw=this.__wv.execute(bv,bx);}else {bw=this[bv].call(this);};}else {if((qx.core.Environment.get(V)==U)||(qx.core.Environment.get(V)==bn)){this.__yI(bv,bx,this.__wv.getCommandObject(bv));bw=this.__wv.execute(bv,bx);if(!bw){this.__yh.pop();};}else {bw=this.__wv.execute(bv,bx);if(bw){this.__yI(bv,bx,this.__wv.getCommandObject(bv));};};if(bv==a&&this.__yh.length==0){this.__yp=false;this.__yQ();}else if(bv==H&&this.__yi.length==0){this.__yo=false;this.__yQ();};};this.__yq=false;return bw;},addUndoStep:function(by,bz,bA){this.__yI(by,bz,bA);},registerHandler:function(bC,bB,bE,bD){this.__yj[bC]={undo:bB,redo:bE,context:bD};},isUndoPossible:function(){return this.__yp;},undo:function(){var bH;if(this.__yq){this.__yK();};if(this.__yh.length>0){var bG=this.__yh.pop();if(this.__yk[bG.actionType.toLowerCase()]){switch(bG.actionType){case r:bH=this.__yt(bG);break;case v:bH=this.__yx(bG);break;case P:bH=this.__yw(bG);break;case bk:bH=this.__ys(bG);break;};}else if(this.__yj[bG.actionType]){var bF=this.__yj[bG.actionType];bH=bF.undo.call(bF.context?bF.context:this,bG);this.__yM(bG);}else {this.error(d+bG.actionType+x);};this.__yo=true;this.__yQ();return bH;};},__ys:qx.core.Environment.select(V,{"mshtml|webkit":function(bK){var bI=this.__sN.body.innerHTML;var bL=bK.content;this.__sN.body.innerHTML=bL;var bJ=bK;bJ.content=bI;this.__yM(bJ);return true;},"default":function(bP){var bO=bP;var bN=qx.bom.element.Style;switch(bP.command){case M:bO.parameter=[bN.get(this.__sN.body,c)];break;case k:bO.parameter=[bN.get(this.__sN.body,z),bN.get(this.__sN.body,A),bN.get(this.__sN.body,F)];break;};this.__yM(bO);if(bP.command==R){if((qx.core.Environment.get(V)==S)){var bQ=p+this.__wv.__hyperLinkId;var bM=this.__sN.getElementById(bQ);if(bM){bM.parentNode.removeChild(bM);return true;}else {return false;};};}else {return this.__wv.execute(bP.command,bP.value);};}}),__yt:qx.core.Environment.select(V,{"mshtml|webkit":function(bR){},"default":function(bS){this.__yM(bS);if((qx.core.Environment.get(V)==S)){if(bS.command==bp&&bS.value==qx.bom.htmlarea.HtmlArea.EMPTY_DIV&&this.__yu(bp,I)){this.__yv();};};return this.__yy();}}),__yu:function(bT,bU){if(this.__yh.length>0){var bV=this.__yh[this.__yh.length-1];return (bV.command==bT&&bV.value==bU);};return false;},__yv:function(){this.__yy();if(this.__yh.length>0){var bW=this.__yh.pop();this.__yM(bW);};},__yw:function(bX){this.__yM(bX);return this.__yy();},__yx:qx.core.Environment.select(V,{"gecko":function(bY){this.__yM(bY);try{return this.__yy();}catch(ca){{};};},"mshtml|webkit":function(cb){},"default":function(cc){this.__yM(cc);return this.__yy();}}),__yy:function(){try{return this.__sN.execCommand(s,false,null);}catch(e){return false;};},isRedoPossible:function(){return this.__yo;},redo:function(){if(this.__yo){var ce;if(this.__yi.length>0){var cf=this.__yi.pop();if(this.__yk[cf.actionType.toLowerCase()]){switch(cf.actionType){case r:ce=this.__yA(cf);break;case v:ce=this.__yG(cf);break;case P:ce=this.__yF(cf);break;case bk:ce=this.__yz(cf);break;};}else if(this.__yj[cf.actionType]){var cd=this.__yj[cf.actionType];ce=cd.redo.call(cd.context?cd.context:this,cf);this.__yL(cf);}else {this.error(d+cf.actionType+x);};this.__yp=true;this.__yQ();};return ce;};},__yz:qx.core.Environment.select(V,{"mshtml|webkit":function(ci){var cg=this.__sN.body.innerHTML;var cj=ci.content;this.__sN.body.innerHTML=cj;var ch=ci;ch.content=cg;this.__yL(ch);return true;},"default":function(ck){this.__yL(ck);return this.__yH();}}),__yA:qx.core.Environment.select(V,{"mshtml|webkit":function(cl){},"default":function(cm){this.__yL(cm);var cn=this.__yH();if((qx.core.Environment.get(V)==S)){if(this.__yB(bp,qx.bom.htmlarea.HtmlArea.EMPTY_DIV)){var co=this.__yC();this.__yD();if(co!=null){this.__yE(co);};};};return cn;}}),__yB:function(cq,cr){if(this.__yi.length>0){var cp=this.__yi[this.__yi.length-1];return (cp.command==cq&&cp.value==cr);};return false;},__yC:function(){if(this.__xq==null){return null;};var cs=this.__xq.getSelection();var ct=cs?cs.focusNode:null;if(ct==null){return null;};try{while(ct.nodeName.toLowerCase()!=B){ct=ct.parentNode;if(!ct||qx.dom.Node.isNodeName(ct,br)){return null;};};}catch(cu){return null;};if(ct!=null&&qx.dom.Node.isNodeName(ct,B)){return ct;}else {return null;};},__yD:function(){var cv=this.__yi.pop();this.__yL(cv);this.__yH();},__yE:qx.core.Environment.select(V,{"gecko":function(cy){if(cy==this.__xq.getContentBody().lastChild){return;};var cz=cy.firstChild;while(cz.firstChild){cz=cz.firstChild;};var cw=this.__xq.getSelection();var cx=this.__xq.getRange();if(cw&&cx){cx.selectNode(cz);cw.addRange(cx);cx.collapse(true);};},"default":(function(){})}),__yF:function(cA){this.__yL(cA);return this.__yH();},__yG:qx.core.Environment.select(V,{"mshtml|webkit":function(cB){},"default":function(cC){this.__yL(cC);return this.__yH();}}),__yH:function(){try{return this.__sN.execCommand(Y,false,null);}catch(e){return false;};},__xx:function(){this._commands={undo:{passthrough:false},redo:{passthrough:false}};this.__wv.getCommandObject(M).customUndo=true;this.__wv.getCommandObject(k).customUndo=true;if((qx.core.Environment.get(V)==S)){};},__yI:qx.core.Environment.select(V,{"mshtml|webkit":function(cD,cF,cG){var cE=this.getUndoRedoObject();cE.commandObject=cG;cE.command=cD;cE.value=cF;cE.actionType=bk;cE.content=this.__sN.body.innerHTML;this.__yJ(cE);},"default":function(cL,cJ,cK){if(this.__xq==null){return;};var cH=this.getUndoRedoObject();cH.commandObject=cK;cH.command=cL;cH.value=cJ;cH.actionType=bk;var cM=this.__xq.getSelection();if(cK.customUndo){var cI=[];switch(cL){case M:cI.push(qx.bom.element.Style.get(this.__sN.body,c));break;case k:cI.push(qx.bom.element.Style.get(this.__sN.body,z),qx.bom.element.Style.get(this.__sN.body,A),qx.bom.element.Style.get(this.__sN.body,F));break;case R:if(cM&&!cM.isCollapsed){cH.actionType=r;};break;};cH.parameter=cI;}else {if((qx.core.Environment.get(V)==S)){if(cM&&cM.isCollapsed){switch(cL){case D:case q:case G:case bp:case bo:cH.actionType=r;break;default:return;};}else {cH.actionType=r;};}else {cH.actionType=r;};};this.__yJ(cH);}}),__yJ:function(cN){if(this.__yq){this.__yK();};this.__yL(cN);this.__yo=false;this.__yi=[];this.__yQ();},__yK:function(){var cO=this.__yh[this.__yh.length-1];if(cO==null||cO.actionType!=v){var cP=this.getUndoRedoObject();cP.actionType=v;if((qx.core.Environment.get(V)==U)||(qx.core.Environment.get(V)==bn)){cP.content=this.__yr;cP.actionType=bk;this.__yr=null;};this.__yL(cP);this.__yq=false;};},getUndoRedoObject:function(){return {actionType:null,commandObject:null,command:null,value:null,parameter:null,range:null,marker:null,content:null};},__yL:function(cQ){{};this.__yh.push(cQ);},__yM:function(cR){{};this.__yi.push(cR);},_handleKeyPress:function(e){var cS=e.getKeyIdentifier().toLowerCase();var cT=e.isCtrlPressed();switch(cS){case l:case m:case K:case o:case bq:case bm:case g:case t:case w:case n:case T:break;case C:case h:case L:case Q:case u:case E:case bj:if(!cT){this.__yN();};break;default:this.__yo=false;this.__yi=[];this.__yN();};},__yN:function(){if(!this.__yq){this.__yq=true;this.__yp=true;if((qx.core.Environment.get(V)==U)||(qx.core.Environment.get(V)==bn)){this.__yr=this.__sN.body.innerHTML;};this.__yQ();};},__yO:null,_handleMouseDown:qx.core.Environment.select(V,{"mshtml":function(e){var cU=e.getOriginalTarget();if(qx.dom.Node.isElement(cU)&&(qx.dom.Node.isNodeName(cU,O)||qx.dom.Node.isNodeName(cU,y))){this.__yO={node:cU,content:cU.outerHTML};}else {this.__yO=null;};},"default":function(e){return true;}}),_handleMouseUp:qx.core.Environment.select(V,{"gecko":function(e){if(this.__xq==null){return;};var cW=this.__xq.getSelection();if(!cW){this.__yO=null;return;};var cY=cW.anchorNode;var cX=cY.childNodes[cW.anchorOffset];if(qx.dom.Node.isNodeName(cX,O)){if(this.__yO==null){this.__yO=cX.cloneNode(true);}else {if(this.__yO.style.width!=cX.style.width||this.__yO.style.height!=cX.style.height){this.__yP();this.__yO=cX.cloneNode(true);};};}else if(qx.dom.Node.isNodeName(cY,N)||qx.dom.Node.isNodeName(cY.parentNode,N)){var cV=cY.parentNode;while(qx.dom.Node.isNodeName(cV,y)){cV=cV.parentNode;};if(this.__yO==null){this.__yO=cV.cloneNode(true);}else {qx.event.Timer.once(function(){if(cV.style.width!=this.__yO.style.width||cV.style.height!=this.__yO.style.height||cV.innerHTML!=this.__yO.innerHTML){this.__yP();this.__yO=cV.cloneNode(true);};},this,0);};}else {this.__yO=null;};},"default":function(e){var da=qx.bom.Event.getTarget(e);if(this.__yO!=null){if(da.nodeType==1){if(da==this.__yO.node){if(da.outerHTML!=this.__yO.content){this.__yO.content=da.outerHTML;this.__yP();};}else {for(var i=0,j=da.childNodes.length;i<j;i++ ){if(da.childNodes[i]==this.__yO.node){if(da.childNodes[i].outerHTML!=this.__yO.content){this.__yO.content=da.childNodes[i].outerHTML;this.__yP();};};};};}else {this.__yO=null;};};}}),__yP:qx.core.Environment.select(V,{"mshtml|webkit":function(){this.__yI(P,null,null);},"default":function(){var db=this.getUndoRedoObject();db.actionType=P;this.__yL(db);}}),__yQ:function(){qx.event.Timer.once(function(e){if(this.__xq!=null){var dc={undo:this.isUndoPossible()?0:-1,redo:this.isRedoPossible()?0:-1};this.__xq.fireDataEvent(bl,dc);};},this,200);}},destruct:function(){try{qx.event.Registration.removeListener(this.__sN.body,X,this.__yl);qx.event.Registration.removeListener(this.__sN,W,this.__ym);if((qx.core.Environment.get(V)==U)){qx.event.Registration.removeListener(this.__sN,f,this.__yn);};}catch(e){};this._disposeObjects(b);this.__xq=this.__yh=this.__yi=this._commands=this.__sN=null;this.__yk=this.__yj=null;}});})();
});